<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>P-Librus: Rejestr Lekcji</title>
  <style>
  body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #e6ebed, #f5f7f9);
      margin: 0;
      padding: 0;
    }
    .header {
      display: flex;
      align-items: center;
      padding: 10px 20px;
      background: linear-gradient(to right, #d4dce4, #f2f3f5);
    }
    .logo {
      display: flex;
      align-items: center;
      margin-right: auto;
    }
    .logo img {
      height: 40px;
      margin-right: 10px;
    }
    .logo span {
      font-size: 24px;
      color: #8a2e6e;
      font-weight: bold;
    }
    .user-info {
      margin-right: 20px;
      font-size: 14px;
    }
    .menu {
      display: flex;
      justify-content: center;
      padding: 10px;
      background-color: #edf0f3;
      flex-wrap: wrap;
    }
    .menu-item {
      text-align: center;
      margin: 10px;
      position: relative;
    }
    .menu-item a {
      font-size: 14px;
      display: block;
      padding: 10px 15px;
      background-color: #ffffff;
      border: 1px solid #ccc;
      border-radius: 10px;
      box-shadow: 1px 1px 5px rgba(0,0,0,0.1);
      text-decoration: none;
      color: black;
      transition: background-color 0.3s;
    }
    .menu-item a:hover {
      background-color: #f0f0f0;
    }
    .badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: red;
      color: white;
      font-size: 10px;
      padding: 2px 5px;
      border-radius: 50%;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #dfe9f3, #ffffff);
      padding: 40px;
      color: #333;
    }
    .lesson-box, .history-box {
      background: #ffffff;
      padding: 30px;
      border-radius: 15px;
      margin-bottom: 30px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .dzial-option {
      background-color: #000;
      color: #fff;
      font-weight: bold;
    }
    h2 {
      color: #2a6f97;
    }
    label {
      font-weight: 600;
      display: block;
      margin-top: 15px;
      color: #34495e;
    }
    select, textarea, input[type="date"], button {
      width: 100%;
      padding: 10px;
      margin-top: 8px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 14px;
    }
    button {
      background: #2a6f97;
      color: white;
      border: none;
      border-radius: 7px;
      cursor: pointer;
      margin-top: 20px;
      font-weight: bold;
      transition: background 0.3s;
    }
    button:hover {
      background: #1b4965;
    }
    ul {
      padding-left: 25px;
    }
    .frekwencja-wrapper {
      margin-bottom: 15px;
      padding: 10px;
      background: #f0f8ff;
      border-radius: 8px;
    }
    .frekwencja-wrapper label {
      font-weight: 500;
      margin-bottom: 5px;
    }
    .frekwencja-wrapper span {
      margin-right: 10px;
    }
	#tabela-klas th, #tabela-klas td {
  border-bottom: 1px solid #ccc;
  padding: 8px;
  text-align: center;
}
#tabela-klas tr:hover {
  background-color: #f2f2f2;
}
.top-alert {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background-color: #2a6f97;
  color: #ffffff;
  padding: 1em 2em;
  font-weight: bold;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  z-index: 1000;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.close-btn {
  background: none;
  border: none;
  font-size: 1.5em;
  line-height: 1;
  cursor: pointer;
  color: #ffffff;
}
td.pasek {
  width: 10px;
}

.pasek.dzien1 { background-color: #4CAF50; }
.pasek.dzien2 { background-color: #2196F3; }
.pasek.bio8   { background-color: #FF9800; }
.pasek.ogolna { background-color: #9C27B0; }


  </style>
</head>
<body>






<div class="header">
    <div class="logo">
      <img src="21 maj 2025, 16_13_32.png" alt="P-Librus logo">
      <span>P-Librus</span>
    </div>
    <div class="user-info">
      Zalogowany jako: <strong>Piotr Rejmentowski (nauczyciel)</strong>
    </div>

  </div>

    <div class="menu">
    <div class="menu-item"><a href="indywidualni.html">Indywidualni</a></div>
    <div class="menu-item"><a href="Lekcja.html">Lekcja</a></div>
    <div class="menu-item"><a href="Oceny.html">Oceny</a></div>
    <div class="menu-item"><a href="Zachowanie.html">Zachowanie</a></div>
    <div class="menu-item"><a href="organizacja.html">Organizacja</a></div>
    <div class="menu-item"><a href="wiadomosci.html">wiadomo≈õci</a></div>
    <div class="menu-item"><a href="Ogloszenia.html">og≈Çoszenia</a></div>
    <div class="menu-item"><a href="Terminarz.html">Terminarz</a></div>
  </div>
<div class="lesson-box">
  <h2>PANEL NAUCZYCIELA LEKCJI</h2>

  <div id="wybor-klasy">
  <h2>Wybierz klasƒô do wpisania nowej lekcji lub edycji.</h2>
  <table style="width: 100%; border-collapse: collapse;" id="tabela-klas">
    <thead>
      <tr>
		<th><i>Kolor</th>
        <th><i>Klasa</th>
        <th><i>Ostatni temat</th>
        <th><i>Data ostatniej lekcji</th>
        <th></th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- Ukryty select, kt√≥ry nadal u≈ºywany w kodzie -->
<select id="klasa-select" style="display: none;">
  <option value="6I-Jƒôzyk_Piotrowski">6I - Jƒôzyk Piotrowski</option>
  <option value="6L-Jƒôzyk_Piotrowski">6L - Jƒôzyk Piotrowski</option>
  <option value="7F-Jƒôzyk_Piotrowski">7F - Jƒôzyk Piotrowski</option>
  <option value="7J-Jƒôzyk_Piotrowski">7J - Jƒôzyk Piotrowski</option>
  <option value="8A-Jƒôzyk_Piotrowski">8A - Jƒôzyk Piotrowski</option>
  <option value="8B-Jƒôzyk_Piotrowski">8B - Jƒôzyk Piotrowski</option>
  <option value="8C-Jƒôzyk_Piotrowski">8C - Jƒôzyk Piotrowski</option>
  <option value="4D-Przyroda">4D - Przyroda</option>
  <option value="1E-Jƒôzyk_Piotrowski">1E - Jƒôzyk Piotrowski</option>
  <option value="2G-Jƒôzyk_Piotrowski">2G - Jƒôzyk Piotrowski</option>
  <option value="3H-Jƒôzyk_Piotrowski">3H - Jƒôzyk Piotrowski</option>
  <option value="7FJ-Biologia">7FJ - Biologia</option>
  <option value="5K-Biologia">5K - Biologia</option>
  <option value="6I-Biologia">6i - Biologia</option>
  <option value="8A-Biologia">8A - Biologia</option>
  <option value="Dodatkowa_Biologia">Dodatkowa biologia</option>
  <option value="Edukacja_og√≥lna">Edukacja og√≥lna</option>
</select>


  <div id="lekcja-form" style="display: none;">
<h3 id="wybrana-klasa" style="color: #2a6f97;"></h3>

  <label for="przedmiot-select">Przedmiot:</label>
  <select id="przedmiot-select">
    <option value="biologia">Biologia</option>
    <option value="jezyk piotrowski">Jƒôzyk Piotrowski</option>
    <option value="geografia">Geografia</option>
    <option value="fizyka">Fizyka</option>
    <option value="jezyk angielski">Jƒôzyk angielski</option>
	<option value="przyroda">Przyroda</option>
    <option value="inny">Inny</option>
	<option value="Edukacja_og√≥lna">Edukacja og√≥lna</option>
  </select>

  <label for="data">Data:</label>
  <input type="date" id="data" />
  
  <br><br>
  <div class="lesson-box">
  <h2>Postƒôp realizacji materia≈Çu</h2>
  <div id="postep-box"></div>
</div>

<script>
function pokazPostep(klasa) {
  const box = document.getElementById("postep-box");
  box.innerHTML = "";

  const wszystkieTematy = tematy[klasa] || [];
  const klucz = `lekcje_${klasa}`;
  const lekcje = JSON.parse(localStorage.getItem(klucz)) || [];

  const zrealizowaneTematy = new Set(lekcje.map(l => l.temat));

  const liczbaZrealizowanych = wszystkieTematy.filter(t => zrealizowaneTematy.has(t)).length;
  const liczbaWszystkich = wszystkieTematy.length;
  const procent = liczbaWszystkich ? Math.round((liczbaZrealizowanych / liczbaWszystkich) * 100) : 0;

  box.innerHTML = `
    <p>Zrealizowano <strong>${liczbaZrealizowanych}</strong> z <strong>${liczbaWszystkich}</strong> temat√≥w (${procent}%)</p>
    <div style="background: #eee; border-radius: 10px; overflow: hidden; height: 20px;">
      <div style="width: ${procent}%; background: #2a6f97; height: 100%; color: white; text-align: center; font-size: 12px;">
        ${procent}%
      </div>
    </div>
  `;
}
function pokazPostep(klasa) {
  const box = document.getElementById("postep-box");
  box.innerHTML = "";

  const wszystkieTematy = (tematy[klasa] || []).filter(t => {
  const tLower = t.toLowerCase();
  return !t.startsWith("DZIA≈Å") &&
    (tLower.includes("powt√≥rzenie") ||
     tLower.includes("sprawdzian") ||
     tLower.includes("om√≥wienie sprawdzianu") ||
     tLower.includes("egzamin") ||
	 tLower.includes("Jak na egzaminie") ||
     tLower === "inne" ||
     (!t.startsWith("DZIA≈Å") && !tLower.includes("dzia≈Ç"))); // zwyk≈Çe bia≈Çe tematy
});

  const klucz = `lekcje_${klasa}`;
  const lekcje = JSON.parse(localStorage.getItem(klucz)) || [];

  const zrealizowaneTematy = new Set(lekcje.map(l => l.temat));
  const liczbaZrealizowanych = wszystkieTematy.filter(t => zrealizowaneTematy.has(t)).length;
  const liczbaWszystkich = wszystkieTematy.length;
  const procent = liczbaWszystkich ? Math.round((liczbaZrealizowanych / liczbaWszystkich) * 100) : 0;

  let ostatniaLekcja = lekcje.length > 0 ? lekcje[lekcje.length - 1] : null;

  box.innerHTML = `
    <p>Zrealizowano <strong>${liczbaZrealizowanych}</strong> z <strong>${liczbaWszystkich}</strong> temat√≥w (${procent}%)</p>
    <div style="background: #eee; border-radius: 10px; overflow: hidden; height: 20px; margin-bottom: 10px;">
      <div style="width: ${procent}%; background: #2a6f97; height: 100%; color: white; text-align: center; font-size: 12px;">
        ${procent}%
      </div>
    </div>
    ${
      ostatniaLekcja
        ? `
          <p><strong>Ostatni temat:</strong> ${ostatniaLekcja.temat}</p>
          <p><strong>Data lekcji:</strong> ${ostatniaLekcja.data}</p>
          ${ostatniaLekcja.opis ? `<p><strong>Komentarz:</strong> ${ostatniaLekcja.opis}</p>` : ""}
        `
        : `<p>Brak zrealizowanych temat√≥w.</p>`
    }
  `;
}



</script>
  
  

  <label for="temat-select">Temat lekcji:</label>
  <select id="temat-select"></select>
  
<label for="nowy-temat">Dodaj w≈Çasny temat lekcji:</label>
<input type="text" id="nowy-temat" placeholder="Wpisz nowy temat..." />
<button type="button" onclick="dodajWlasnyTemat()">Dodaj temat</button>

<label for="opis">Dodatkowe notatki:</label>
<textarea id="opis" rows="3"></textarea>

  <label>Frekwencja uczni√≥w:</label>
<button type="button" onclick="zaznaczWszystkichObecnosc()" style="margin-bottom: 10px;">Zaznacz wszystkich jako Obecno≈õƒá</button>
<div id="frekwencja-box"></div>

  <button onclick="zapiszLekcje()">Zapisz lekcjƒô</button>
</div>

<script>
  function dodajWlasnyTemat() {
    const nowyTematInput = document.getElementById("nowy-temat");
    const nowyTemat = nowyTematInput.value.trim();

    if (nowyTemat === "") {
      alert("Proszƒô wpisaƒá temat lekcji.");
      return;
    }

    const klasa = document.getElementById("klasa-select").value;
    if (!tematy[klasa]) tematy[klasa] = [];

    tematy[klasa].push(nowyTemat);

    const tematSelect = document.getElementById("temat-select");
    const option = document.createElement("option");
    option.value = nowyTemat;
    option.textContent = nowyTemat;
    tematSelect.appendChild(option);

    tematSelect.value = nowyTemat;
    nowyTematInput.value = "";
  }

</script>
	
<div class="history-box" id="historia-box" style="display: none;">
  <h2>Historia lekcji</h2>
  <ul id="historia-lekcji"></ul>
</div>

</div> <!-- zamkniƒôcie #lekcja-form -->

<script>
  const uczniowie = {
	'6I-Jƒôzyk_Piotrowski': ['Jagoda', 'Krystian', 'Justyna'],
	'6L-Jƒôzyk_Piotrowski': ['Pawe≈Ç', 'Ola', 'Natalia', 'Karol'],
    '7F-Jƒôzyk_Piotrowski': ['Ola', 'Julia', 'Natan', 'Filip'],
	'7J-Jƒôzyk_Piotrowski': ['Zuzia', 'Kasia', 'Maja'],
    '8A-Jƒôzyk_Piotrowski': ['Agata', 'Tadeusz', 'Piotr'],
    '8B-Jƒôzyk_Piotrowski': ['Gosia', 'Grzesiek', 'Agnieszka', 'Adam'],
    '8C-Jƒôzyk_Piotrowski': ['Wiesia', 'Alina', 'Bo≈ºena', 'Halinka'],
    '1E-Jƒôzyk_Piotrowski': ['Ola', 'Maria', 'Marta'],
	'2G-Jƒôzyk_Piotrowski': ['Jagoda', 'Szymon', 'Antek', 'Lena'],
	'3H-Jƒôzyk_Piotrowski': ['Andrzej', 'Maciej', 'Patryk'],
    '4D-Przyroda': ['Mirek', 'Ela', 'Ula'],
	'5K-Biologia': ['Tymek','Tosia','Dobromi≈Ça','Kasjan'],
    '6I-Biologia': ['Jagoda', 'Krystian', 'Justyna'],
	'7FJ-Biologia': ['Ola', 'Julia', 'Natan', 'Filip', 'Zuzia', 'Kasia', 'Maja'],
	'8A-Biologia': ['Agata', 'Tadeusz', 'Piotr'],
	'Dodatkowa_Biologia': ['Jagoda', 'Krystian', 'Justyna', 'Agata', 'Tadeusz', 'Piotr', 'Ola', 'Julia', 'Natan', 'Filip', 'Zuzia', 'Kasia', 'Maja', 'Mirek', 'Ela', 'Ula'],
	'Edukacja_og√≥lna': ['Julia','Ola','Zuzia','Tadeusz','Grzesiek','Adam','Wiesia','Bo≈ºena','Jagoda','Antek','Maciej','Tosia']
  };

  const tematy = {
  
      "6I-Jƒôzyk_Piotrowski": ["DZIA≈Å 1 - WPROWADZENIE", "Kolory i pomieszczenia", "Alfabet i znaki piotrowskie", "DZIA≈Å 2 - Liczby i daty", "Liczby","Daty", "DZIA≈Å 3 - PIERWSZA GRAMATYKA", "Podstawy gramatyki piotrowskiej","Past simple - Wprowadzenie","Past simple - Og√≥lno≈õƒá i Upodobania","Past simple - Regularno≈õƒá i jej czas","Past simple - Osobowo≈õƒá i jej opis", "DZIA≈Å 4 - GRAMATYKA DODATKOWA", "Zaimki osobowe","Present Simple - Wprowadzenie","Powt√≥rzenie do egzaminu 1", "Powt√≥rzenie do egzaminu 2", "Egzamin sz√≥stoklasisty"],
	  "6L-Jƒôzyk_Piotrowski": ["DZIA≈Å 0 - CA≈ÅY PODRƒòCZNIK", "Alfabet i znaki piotrowskie", "Pomieszczenia", "Liczby", "MiesiƒÖce, Daty", "Kolory", "Past simple - Wprowadzenie","Past simple - Og√≥lno≈õƒá, Upodobania","Past simple - Regularno≈õƒá","Past simple - Opis osobowy",  "Zaimki osobowe" ,"Powt√≥rzenie wiadomo≈õci", "Sprawdzian", "Om√≥wienie sprawdzianu"],
      "7F-Jƒôzyk_Piotrowski": ["Inne", "DZIA≈Å 1 - ZDROWIE","Choroby i b√≥le","Czƒô≈õci cia≈Ça i zdrowy styl ≈ºycia","Past simple","Jak na egzaminie","DZIA≈Å 2 - ≈öWIAT ORAZ PRZYRODA","Kontynenty oraz kraje","Zwierzƒôta, Krajobrazy, Ro≈õliny","Czas poprawny, Zapis czasu s≈Çownie","Present Simple","Jak na egzaminie (2)","DZIA≈Å 3 - ≈ªYCIE PRYWATNE", "Rodzina i znajomi", "Czas wolny, Wydarzenia", "Present Cintus", "Jak na egzaminie (3)","DZIA≈Å 4 - CZ≈ÅOWIEK", "Cechy charakteru, WyglƒÖd zewnƒôtrzny","Ubrania, Przedmioty osobiste", "Etapy ≈ºycia","Zaimki osobowe", "Por√≥wnanie czas√≥w tera≈∫niejszych","Jak na egzaminie (4)"],
      "7J-Jƒôzyk_Piotrowski": ["Inne", "DZIA≈Å 1 - CZ≈ÅOWIEK","Vocabulary (1)", "Gramar (1)", "Buking i writing (1)", "Powt√≥rzenie wiadomo≈õci (1)","Sprawdzian (1)","Om√≥wienie sprawdzianu (1)", "DZIA≈Å 2 - ZDROWIE","Vocabulary (2)", "Gramar (2)", "Buking i writing (2)", "Powt√≥rzenie wiadomo≈õci (2)","Sprawdzian (2)","Om√≥wienie sprawdzianu (2)", "DZIA≈Å 3 - ≈ªYCIE PRYWATNE","Vocabulary (3)", "Gramar (3)", "Buking i writing (3)", "Powt√≥rzenie wiadomo≈õci (3)","Sprawdzian (3)","Om√≥wienie sprawdzianu (3)", "DZIA≈Å 4 - ≈öWIAT I PRZYRODA","Vocabulary (4)", "Gramar (4)", "Buking i writing (4)", "Powt√≥rzenie wiadomo≈õci (4)","Sprawdzian (4)","Om√≥wienie sprawdzianu (4)"],
      "8A-Jƒôzyk_Piotrowski": ["DZIA≈Å 1 - PRACA", "Zawody", "Odmiana zawod√≥w przez osoby", "Miejsca prac", "Present Simple", "Jak na egzaminie (1)", "DZIA≈Å 2 - EDUKACJA", "Przedmioty fizyczne i lekcyjne", "Pracownicy i pomieszczenia", "Czasowniki szkolne", "Present Hadsing", "Jak na egzaminie (2)", "DZIA≈Å 3 - DOM", "Rodzaje miejsc zamieszkania", "Meble wewnƒôtrzne", "Na zewnƒÖtrz", "Okre≈õlenia i pomieszczenia", "Present Past", "Jak na egzaminie (3)", "DZIA≈Å 4 - LEKCJE DODATKOWE", "Zaimki osobowe", "Gramatyka piotrowska", "Jak na egzaminie (4)"],
      "8B-Jƒôzyk_Piotrowski": ["Inne", "DZIA≈Å 1 - MIEJSCE ZAMIESZKANIA", "Vocabulary (1)", "Gramar (1)", "Buking i writing (1)", "Powt√≥rzenie wiadomo≈õci (1)","Sprawdzian (1)","Om√≥wienie sprawdzianu (1)", "DZIA≈Å 2 - EDUKACJA","Vocabulary (2)", "Gramar (2)", "Buking i writing (2)", "Powt√≥rzenie wiadomo≈õci (2)","Sprawdzian (2)","Om√≥wienie sprawdzianu (2)", "DZIA≈Å 3 - PRACA","Vocabulary (3)", "Gramar (3)", "Buking i writing (3)", "Powt√≥rzenie wiadomo≈õci (3)","Sprawdzian (3)","Om√≥wienie sprawdzianu (3)"],
	  "8C-Jƒôzyk_Piotrowski": ["Inne", "DZIA≈Å 1 - MIEJSCE ZAMIESZKANIA", "Rodzaje miejsc zamieszkania","Meble","Na zewnƒÖtrz","Okre≈õlenia dom√≥w i pomieszczenia","Present simple","Powt√≥rzenie wiadomo≈õci (1)","Sprawdzian (1)","Om√≥wienie sprawdzianu (1)","DZIA≈Å 2 - EDUKACJA","Przedmioty fizyczne","Przedmioty lekcyjne","Pracownicy i pomieszczenia w szkole","Czasowniki szkolne","Present hadsing","Powt√≥rzenie wiadomo≈õci (2)","Sprawdzian (2)","Om√≥wienie sprawdzianu (2)","DZIA≈Å 3 - PRACA", "Zawody", "Odmiana zawod√≥w przez osoby","Miejsca prac","Present past","Zaimki osobowe", "Powt√≥rzenie wiadomo≈õci (3)","Sprawdzian (3)","Om√≥wienie sprawdzianu (3)"],
	  "1E-Jƒôzyk_Piotrowski": ["Inne", "DZIA≈Å 1 - SPORT","Vocabulary (1)", "Gramar (1)", "Buking i writing (1)", "Powt√≥rzenie wiadomo≈õci (1)","Sprawdzian (1)","Om√≥wienie sprawdzianu (1)", "DZIA≈Å 2 - KULTURA","Vocabulary (2)", "Gramar (2)", "Buking i writing (2)", "Powt√≥rzenie wiadomo≈õci (2)","Sprawdzian (2)","Om√≥wienie sprawdzianu (2)", "DZIA≈Å 3 - TRANSPORT I TURYSTYKA","Vocabulary (3)", "Gramar (3)", "Buking i writing (3)", "Powt√≥rzenie wiadomo≈õci (3)","Sprawdzian (3)","Om√≥wienie sprawdzianu (3)"],
	  "2G-Jƒôzyk_Piotrowski": ["Inne", "DZIA≈Å 1 - ≈öWIAT PRZYRODY","Vocabulary (1)", "Gramar (1)", "Buking i writing (1)", "Powt√≥rzenie wiadomo≈õci (1)","Sprawdzian (1)","Om√≥wienie sprawdzianu (1)", "DZIA≈Å 2 - ZDROWIE","Vocabulary (2)", "Gramar (2)", "Buking i writing (2)", "Powt√≥rzenie wiadomo≈õci (2)","Sprawdzian (2)","Om√≥wienie sprawdzianu (2)"],
	  "3H-Jƒôzyk_Piotrowski": ["Inne", "DZIA≈Å 1 - ≈ªYWIENIE","Vocabulary (1)", "Gramar (1)", "Buking i writing (1)", "Nagra≈Ñ i lang funkq (1)", "Powt√≥rzenie wiadomo≈õci (1)","Sprawdzian (1)","Om√≥wienie sprawdzianu (1)", "DZIA≈Å 2 - ZAKUPY I US≈ÅUGI","Vocabulary (2)", "Gramar (2)", "Buking i writing (2)", "Nagra≈Ñ i lang funkq (2)", "Powt√≥rzenie wiadomo≈õci (2)","Sprawdzian (2)","Om√≥wienie sprawdzianu (2)"],
  	  "4D-Przyroda": ["DZIA≈Å 1 - Poznajemy warsztat przyrodnika","Przyroda i jej sk≈Çadniki", "Jak poznawaƒá przyrodƒô?", "PrzyrzƒÖdy i pomoce przyrodnika","Okre≈õlamy kierunki geograficzne", "Powt√≥rzenie wiadomo≈õci (1)","Sprawdzian (1)","Om√≥wienie sprawdzianu (1)", "DZIA≈Å 2 - Poznajemy pogodƒô i inne zjawiska przyrodnicze", "Substancje wok√≥≈Ç nas", "Woda wystƒôpuje w trzech stanach skupienia", "Sk≈Çadniki pogody","Obserwujemy pogodƒô",",,Wƒôdr√≥wka'' S≈Ço≈Ñca po niebie", "Powt√≥rzenie wiadomo≈õci (2)","Sprawdzian (2)","Om√≥wienie sprawdzianu (2)", "DZIA≈Å 3 - Poznajemy ≈õwiat organizm√≥w", "Organizmy majƒÖ wsp√≥lne cechy", "Organizmy r√≥≈ºniƒÖ siƒô sposobem od≈ºywiania","Ro≈õliny i zwierzƒôta wok√≥≈Ç nas", "Powt√≥rzenie wiadomo≈õci (3)","Sprawdzian (3)","Om√≥wienie sprawdzianu (3)", "DZIA≈Å 4 - Odkrywamy tajemnice cia≈Ça cz≈Çowieka","Trawienie i wch≈Çanianie pokarmu", "Uk≈Çad krwiono≈õny transportuje krew", "Uk≈Çad oddechowy zapewnia wymianƒô gazowƒÖ","Szkielet i miƒôsnie umo≈ºliwiajƒÖ ruch","Uk≈Çad nerwowy kontroluje pracƒô organizmu","Uk≈Çad rozrodczy umo≈ºliwia wydawanie na ≈õwiat potomstwa", "Dojrzewanie to czas wielkich zmian", "Powt√≥rzenie wiadomo≈õci (4)","Sprawdzian (4)","Om√≥wienie sprawdzianu (4)","DZIA≈Å 5 - Odkrywamy tajemnice zdrowia","Zdrowy styl ≈ºycia", "Choroby zaka≈∫ne i paso≈ºytnicze", "Jak postƒôpowaƒá w niebezpiecznych sytuacjach?","Czym jest uzale≈ºnienie?", "Powt√≥rzenie wiadomo≈õci (5)","Sprawdzian (5)","Om√≥wienie sprawdzianu (5)", "DZIA≈Ç 6 - ORIENTUJEMY SIƒò W TERENIE", "Co pokazujemy na planach?", "Jak czytamy mapy i plany?", "Jak siƒô orientowaƒá w terenie?", "Powt√≥rzenie wiadomo≈õci (6)", "Sprawdzian (6)", "Om√≥wienie sprawdzianu (6)", "DZIA≈Å 7 - Poznajemy krajobraz najbli≈ºszej okolicy","Rodzaje krajobraz√≥w", "Ukszta≈Çtowanie terenu", "Czy wszystkie ska≈Çy sƒÖ twarde?","Wody s≈Çodkie i s≈Çone","Krajobraz wczoraj i dzi≈õ", "Obszary i obiekty chronione", "Powt√≥rzenie wiadomo≈õci (7)","Sprawdzian (7)","Om√≥wienie sprawdzianu (7)", "DZIA≈Å 8 - Odkrywamy tajemnice ≈ºycia w wodzie i na lƒÖdzie","Warunki ≈ºycia w wodzie", "Z biegiem rzeki", "≈ªycie w jeziorze","Warunki ≈ºycia na lƒÖdzie","Las ma budowƒô warstwowƒÖ", "Jakie drzewa rosnƒÖ w lesie?", "Na ≈ÇƒÖce", "Na polu uprawnym", "Powt√≥rzenie wiadomo≈õci (8)","Sprawdzian (8)","Om√≥wienie sprawdzianu (8)"],
	  "5K-Biologia": ["Inne", "DZIA≈Å 1 - Biologia - nauka o ≈ºyciu", "Biologia jako nauka", "Jak poznawaƒá biologiƒô", "Obserwacje mikroskopowe", "Powt√≥rzenie wiadomo≈õci (1)", "Praca klasowa (1)", "Om√≥wienie pracy klasowej (1)", "DZIA≈Å 2 - Budowa i czynno≈õci ≈ºyciowe organizm√≥w", "Sk≈Çadniki chemiczne organizm√≥w", "Budowa kom√≥rki zwierzƒôcej", "Kom√≥rka ro≈õlinna. 1nne rodzaje kom√≥rek", "Samo≈ºywno≈õƒá", "Cudzo≈ºywno≈õƒá", "Sposoby oddychania organizm√≥w", "Powt√≥rzenie wiadomo≈õci (2)", "Praca klasowa (2)", "Om√≥wienie pracy klasowej (2)", "DZIA≈Å 3 - Wirusy, bakterie, protisty i grzyby", "Klasyfikacja organizm√≥w", "Wirusy i bakterie", "R√≥≈ºnorodno≈õƒá protist√≥w", "Budowa i ro≈ºnorodno≈õƒá grzyb√≥w. Protosty", "Powt√≥rzenie wiadomo≈õci (3)", "Praca klasowa (3)", "Om√≥wienie pracy klasowej (3)", "DZIA≈Å 4 - Tkanki i organy ro≈õl1nne", "Tkanki ro≈õl1nne", "Korze≈Ñ  organ podziemny ro≈õliny", "Pƒôd. Budowa i funkcje ≈Çodygi", "Li≈õƒá - wytw√≥rnia pokarmu", "Powt√≥rzenie wiadomo≈õci (4)", "Praca klasowa (4)", "Om√≥wienie pracy klasowej (4)", "DZIA≈Å 5 - R√≥≈ºnorodno≈õƒá ro≈õlin", "Mchy", "Paprotniki", "Nagonasienne", "Okrytonasienne", "Rozprzestrzenianie siƒô ro≈õlin okrytonasiennych", "Znaczenie i przeglƒÖd ro≈õlin okrytonasiennych", "Powt√≥rzenie wiadomo≈õci (5)", "Praca klasowa (5)", "Om√≥wienie pracy klasowej (5)"],
	  "6I-Biologia": ["Inne", "DZIA≈Å 1 - ≈öwiat zwierzƒÖt","W kr√≥lestwie zwierzƒÖt", "Tkanki : Nab≈Çonkowa, miƒô≈õniowa i nerwowa", "Tkanka ≈ÅƒÖczna", "Powt√≥rzenie wiadomo≈õci (1)","Sprawdzian (1)","Om√≥wienie sprawdzianu (1)", "DZIA≈Å 2 - Od parzyde≈Çkowc√≥w do pier≈õcienic","Parzyde≈Çkowce - najprostrze zwierzƒôta tkankowe", "P≈Çazi≈Ñce - zwierzƒôta, kt√≥re majƒÖ p≈Çaskie cia≈Ço", "Nicienie - zwierzƒôta, kt√≥re majƒÖ nitkowate cia≈Ço","Pier≈õcienice - zwierzƒôta kt√≥re majƒÖ segemntowane cia≈Ço", "Powt√≥rzenie wiadomo≈õci (2)","Sprawdzian (2)","Om√≥wienie sprawdzianu (2)", "DZIA≈Å 3 - Stawonogi i miƒôczaki","Cechy stawonog√≥w", "Skorupiaki - stawonogi, kt√≥re majƒÖ twardy pancerz", "Owady - stawonogi zdolne do lotu","Pajƒôczaki - stawonogi, kt√≥re majƒÖ czety pary odn√≥≈ºy","Miƒôczaki - zwierzƒôta kt√≥re majƒÖ muszlƒô", "Powt√≥rzenie wiadomo≈õci (3)","Sprawdzian (3)","Om√≥wienie sprawdzianu (3)","DZIA≈Å 4 - Krƒôgowce zmiennocieplne","Ryby - Krƒôgowce ≈õrodowisk wodnych", "PrzeglƒÖd i znaczenie ryb", "P≈Çazy - Krƒôgowce wodno-lƒÖdowe","PrzeglƒÖd i znaczenie p≈Çaz√≥w","Gady - Krƒôgowce, kt√≥re opanowa≈Çy lƒÖd","PrzeglƒÖd i znaczenie gad√≥w", "Powt√≥rzenie wiadomo≈õci (4)","Sprawdzian (4)","Om√≥wienie sprawdzianu (4)", "DZIA≈Å 5 - Krƒôgowce sta≈Çocieplne","Ptaki - Krƒôgowce zdolne do lotu", "PrzeglƒÖd i znaczenie ptak√≥w", "Ssaki - krƒôgowce, kt√≥re karmiƒÖ m≈Çode mlekiem","PrzeglƒÖd i znaczenie ssak√≥w", "Powt√≥rzenie wiadomo≈õci (3)","Sprawdzian (3)","Om√≥wienie sprawdzianu (3)"],
	  "7FJ-Biologia": ["Inne", "DZIA≈Å 1 - Organizm cz≈Çowieka. Sk√≥ra - pow≈Çoka organizmu", "Organizm cz≈Çowieka jako funkcjonalna ca≈Ço≈õƒá", "Budowa i funkcje sk√≥ry", "Higiena i choroby sk√≥ry", "Powt√≥rzenie wiadomo≈õci (1)", "Praca klasowa (1)", "Om√≥wienie pracy klasowej (1)", "DZIA≈Å 2 - Aparat ruchu", "Aparat ruchu. Budowa szkieletu", "Budowa ko≈õci", "Budowa i rola szkieletu osiowego", "Szkielet ko≈Ñczyn", "Budowa i rola miƒô≈õni", "Higienia i choroby aparatu ruchu", "Powt√≥rzenie wiadomo≈õci (2)", "Praca klasowa (2)", "Om√≥wienie pracy klasowej (2)", "DZIA≈Å 3 - Uk≈Çad pokarmowy", "Pokarm - budulec i ≈∫r√≥d≈Ço energii", "Witaminy, sole mineralne, woda", "Budowa i rola uk≈Çadu pokarmowego", "Higienia i choroby uk≈Çadu pokarmowego", "Powt√≥rzenie wiadomo≈õci (3)", "Praca klasowa (3)", "Om√≥wienie pracy klasowej (3)", "DZIA≈Å 4 - Uk≈Çad krƒÖ≈ºenia", "Budowa i funckje krwi", "KrƒÖ≈ºenie krwi", "Budowa i dzia≈Çanie serca", "Higienia i choroby uk≈Çadu krwiono≈õnego", "Uk≈Çad limfatyczny", "Budowa i dzia≈Çanie uk≈Çadu odporno≈õciowego", "Zaburzenia funkcjonowania uk≈Çadu odporno≈õciowego", "Powt√≥rzenie wiadomo≈õci (4)", "Praca klasowa (4)", "Om√≥wienie pracy klasowej (4)", "DZIA≈Å 5 - Uk≈Çad oddechowy", "Budowa i rola uk≈Çadu oddechowego", "Mechanizm oddychania", "Higienia i choroby uk≈Çadu oddechowego", "Powt√≥rzenie wiadomo≈õci (5)", "Praca klasowa (5)", "Om√≥wienie pracy klasowej (5)", "DZIA≈Å 6 - Uk≈Çad Wydalniczy", "Budowa i dzia≈Çanie uk≈Çadu wydalniczego", "Higienia i choroby uk≈Çadu wydalniczego", "Powt√≥rzenie wiadomo≈õci (6)", "Praca klasowa (6)", "Om√≥wienie pracy klasowej (6)", "DZIA≈Å 7 - Regulacja nerwowo-hormonalna", "Budowa i funkcjonowanie uk≈Çadu hormonalnego", "Zaburzenia funkcjonowania uk≈Çadu hormonalnego", "Budowa i rola uk≈Çadu hormonalnego", "O≈õrodkowy uk≈Çad nerwowy", "Obwodowy uk≈Çad nerwowy. Odruchy", "Higiena uk≈Çadu nerwowego", "Powt√≥rzenie wiadomo≈õci (7)", "Praca klasowa (7)", "Om√≥wienie pracy klasowej (7)", "DZIA≈Å 8 - NarzƒÖdy zmys≈Ç√≥w", "Budowa i dzia≈Çanie narzƒÖdu wzroku", "Ucho - narzƒÖd s≈Çuchu i r√≥wnowagi", "Higienia oka i ucha", "Zmys≈Çy powonienia, smaku i dotyku", "Powt√≥rzenie wiadomo≈õci (8)", "Praca klasowa (8)", "Om√≥wienie pracy klasowej (8)", "DZIA≈Å 9 - Rozmna≈ºanie i rozw√≥j cz≈Çowieka", "Mƒôski uk≈Çad rozrodczy", "≈ªe≈Ñski uk≈Çad rozrodczy", "Funkcjonowanie ≈ºe≈Ñskiego uk≈Çadu rozrodczego", "Rozw√≥j cz≈Çowieka - od poczƒôcia do narodzin", "Rozw√≥j cz≈Çowieka - od narodzin do staro≈õci", "Higienia i choroby uk≈Çadu rozrodczego", "Powt√≥rzenie wiadomo≈õci (9)", "Praca klasowa (9)", "Om√≥wienie pracy klasowej (9)", "DZIA≈Å 10 - R√≥wnowaga wewnƒôtrzn organizmu", "Mechanizmy regulacyjne organizmu", "Choroba - zaburzenie homeostazy", "Powt√≥rzenie wiadomo≈õci (10)", "Praca klasowa (10)", "Om√≥wienie pracy klasowej (10)"],
	  "8A-Biologia": ["Inne", "DZIA≈Å 1 - Genetyka", "Czym jest genetyka?", "No≈õnik informacji genetycznej - DNA", "Podzia≈Çy kom√≥rkowe", "Podstawowe prawa dziedziczenia", "Dziedziczenie cech u cz≈Çowieka", "Dziedziczenie ", "Dziedziczenie p≈Çci u cz≈Çowieka", "Dziedziczenie grup krwi", "Mutacje", "Powt√≥rzenie wiadomo≈õci (1)", "Praca klasowa (1)", "Om√≥wienie pracy klasowej (1)", "DZIA≈Å 2 - Ewolucja ≈ºycia", "≈πr√≥d≈Ça wiedzy o ewolucji", "Mechanizmy ewolucji", "Pochodznie cz≈Çowieka", "Powt√≥rzenie wiadomo≈õci (2)", "Praca klasowa (2)", "Om√≥wienie pracy klasowej (2)", "DZIA≈Å 3 - Ekologia", "Organizm a ≈õrodowisko", "Cechy populacji", "Konkurencja", "Drapie≈ºnictwo. Ro≈õlino≈ºerno≈õƒá", "Pasy≈ºytnictwo", "Nieantagonistyczne zale≈ºno≈õci miƒôdzy gatunkami", "Czym jest ekosystem?", "Zale≈ºno≈õci pokarmowe", "Materia i energia w ekosystemie", "Powt√≥rzenie wiadomo≈õci (3)", "Praca klasowa (3)", "Om√≥wienie pracy klasowej (3)", "DZIA≈Å 4 - Cz≈Çowiek i ≈õrodowisko", "Ro≈ºnorodno≈õƒá biologiczna", "Wp≈Çyw cz≈Çowieka na r√≥≈ºnorodno≈õƒá biologicznƒÖ", "Racjonalne gospodarowanie zasobami przyrody", "Sposoby ochrony przyrody", "Powt√≥rzenie wiadomo≈õci (4)", "Praca klasowa (4)", "Om√≥wienie pracy klasowej (4)"],
	  "Dodatkowa_Biologia": ["Inne", "DZIA≈Å 1 - Biologia jako nauka o ≈ºyciu","Biologia jako nauka o ≈ºyciu", "Dziedziny biologii", "Metody badawcze w biologii", "DZIA≈Å 2 - Organizacja i chemizm ≈ºycia","Pierwiastki budujƒÖce cia≈Ço organizm√≥w", "Znaczenie wody dla funkcjonowania organizm√≥w", "Sk≈Çad chemiczny kom√≥rek", "Fotosynteza, oddychanie tlenowe i fermnentacja jako procesy dostarczajƒÖce energii", "Czynniki niezbƒôdne do ≈ºycia dla organizm√≥w samo≈ºywnych i cudzo≈ºywnych", "DZIA≈Å 3 - Budowa i funkcjonowanie kom√≥rki","Rodzaje kom√≥rek", "Struktury kom√≥rkowe i ich funkcje", "Por√≥wnanie budowy kom√≥rki zwierzƒôcej, ro≈õlinnej i bakteryjnej.","DZIA≈Å 4 - Budowa i funkcjonowanie organizmu ro≈õlinnego","Organy ro≈õlinne - wegetatywne i generatywne", "Mszaki", "Paprociowe","Ro≈õliny nagonasienne","Ro≈õliny okrytonasienne", "DZIA≈Å 5 - R√≥≈ºnorodno≈õƒá ≈ºycia", "System klasyfikacji biologicznej", "Wirusy - najmniejsi zab√≥jcy ≈õwiat; podstawy mikrobiologii", "Bakterie","Grzyby", "Porosty","Zwierzƒôta","Cechy wybranych grup zwierzƒÖt - bezkrƒôgowce", "Cechy wybranych grup zwierzƒÖt - krƒôgowce", "Por√≥wnanie cech morfologicznych, ≈õrodowiska i trybu ≈ºycia wybranych grup zwierzƒÖt", "DZIA≈Å 6 - Organizm cz≈Çowieka", "Tkanki", "Uk≈Çady narzƒÖd√≥w i ich rola w organizmie", "Uk≈Çad ruchu", "Uk≈Çad pokarmowy i od≈ºywianie", "Uk≈Çad oddechowy", "Uk≈Çad krƒÖ≈ºenia", "Uk≈Çad limfatyczny", "Uk≈Çad odporno≈õciowy", "Uk≈Çad wydalniczy", "Uk≈Çad nerwowy", "NarzƒÖdy zmys≈Ç√≥w", "Uk≈Çad hormonalny", "Sk√≥ra cz≈Çowieka", "Rozmna≈ºanie i rozw√≥j", "R√≥wnowaga wewnƒôrzna organizmu - homeostaza", "DZIA≈Å 7 - Genetyka", "Proces mitozy i mejozy", "Budowa i funkcja DNA", "Dziedziczenie cech jednogenowych", "Mutacje i ich rodzaje", "DZIA≈Å 8 - Ewolucja ≈ºycia", "Dowody ewolucji", "Mechanizmy ewolucji", "Jak powstajƒÖ nowe gatunki?", "Historia i pochodzenie cz≈Çowieka", "Przebieg ewolucji cz≈Çowieka", "DZIA≈Å 9 - Ekologia", "Organizm i ≈õrodowisko", "Populacja i jej cechy", "Interakcje w populacji", "Ekosystem", "DZIA≈Å 10 - Zagro≈ºenia r√≥≈ºnorodno≈õci biologicznej", "Konieczno≈õƒá ochrony r√≥≈ºnorodno≈õci biologicznej", "Zanieczyszczenia powietrza", "Zanieszczynia wody i gleby", "Ochrona ≈õrodowiska"],
	  "Edukacja_og√≥lna": ["Inne","Temat edukacji og√≥lnej", "Powt√≥rzenie przed sprawdzianem","Sprawdzian/Praca pisemna", "Om√≥wienie sprawdzianu"]
 
	};

	const kolory = {
  '6I-Jƒôzyk_Piotrowski': "#4CAF50",
  '6L-Jƒôzyk_Piotrowski': "#4CAF50",
  '7F-Jƒôzyk_Piotrowski': "#4CAF50",
  '7J-Jƒôzyk_Piotrowski': "#4CAF50",
  '8A-Jƒôzyk_Piotrowski': "#4CAF50",
  '8B-Jƒôzyk_Piotrowski': "#4CAF50",
  '8C-Jƒôzyk_Piotrowski': "#4CAF50", 
  '1E-Jƒôzyk_Piotrowski': "#2196F3", 
  '2G-Jƒôzyk_Piotrowski': "#2196F3", 
  '3H-Jƒôzyk_Piotrowski': "#2196F3",  
  '4D-Przyroda': "#2196F3", 
  '5K-Biologia': "#2196F3", 
  '6I-Biologia': "#2196F3", 
  '7FJ-Biologia': "#2196F3", 
  '8A-Biologia': "#FF9800",
  'Edukacja_og√≥lna': "#9C27B0",
  'Dodatkowa_Biologia': "#FF9800" 
};

  const klasaSelect = document.getElementById("klasa-select");
  const tematSelect = document.getElementById("temat-select");

  function updateTematy() {
  tematSelect.innerHTML = "";
  const klasa = klasaSelect.value;

  const klucz = `lekcje_${klasa}`;
  const lekcje = JSON.parse(localStorage.getItem(klucz)) || [];
  const zrealizowaneTematy = new Set(lekcje.map(l => l.temat));

  if (tematy[klasa]) {
    tematy[klasa].forEach(t => {
      const option = document.createElement("option");
      option.value = t;
      option.textContent = t;

      if (t.startsWith("DZIA≈Å")) {
        option.classList.add("dzial-option");
      }

      const tLower = t.toLowerCase();  
      if (
        tLower.includes("powt√≥rzenie wiadomo≈õci") ||
        tLower.includes("sprawdzian") ||
        tLower.includes("om√≥wienie sprawdzianu") ||
        tLower.includes("powt√≥rzenie do egzaminu 1") ||
        tLower.includes("powt√≥rzenie do egzaminu 2") ||
        tLower.includes("egzamin sz√≥stoklasisty") ||
        tLower.includes("jak na egzaminie") ||
		tLower.includes("praca klasowa") ||
		tLower.includes("om√≥wienie pracy klasowej") ||
        tLower.includes("inne")
      ) {
        option.style.backgroundColor = "#ccffcc"; // jasnozielony
      }

      if (zrealizowaneTematy.has(t)) {
        option.style.backgroundColor = "yellow"; // temat ju≈º zrobiony
      }

      tematSelect.appendChild(option);
    });
  }

  // automatycznie zaznacz nastƒôpny temat
  wybierzNastepnyTemat(klasa, zrealizowaneTematy);
}

function wybierzNastepnyTemat(klasa, zrealizowaneTematy) {
  const lista = tematy[klasa] || [];

  for (let temat of lista) {
    if (!zrealizowaneTematy.has(temat) && !temat.startsWith("DZIA≈Å")) {
      tematSelect.value = temat;
      break;
    }
  }
}

  function pokazFrekwencje(klasa) {
    const kontener = document.getElementById("frekwencja-box");
    kontener.innerHTML = "";

    if (!uczniowie[klasa]) return;

    uczniowie[klasa].forEach((uczen, index) => {
      const wrapper = document.createElement("div");
      wrapper.className = "frekwencja-wrapper";

      const label = document.createElement("label");
      label.textContent = uczen;
      wrapper.appendChild(label);

      ["Obecno≈õƒá", "Sp√≥≈∫nienie", "Nieobecno≈õƒá nieusprawiedliwiona", "Nieobecno≈õƒá usprawiedliwiona", "Zwolnienie", "Rekolekcje", "Egzamin", "Sanatorium", "Wycieczka", "Konkurs", "Wolontariat"].forEach(opcja => {
        const radio = document.createElement("input");
        radio.type = "radio";
        radio.name = `frekwencja_${index}`;
        radio.value = opcja;

        const span = document.createElement("span");
        span.textContent = opcja;

        wrapper.appendChild(radio);
        wrapper.appendChild(span);
      });

      kontener.appendChild(wrapper);
    });
  }

  function zapiszLekcje() {
    const data = document.getElementById("data").value;
    const klasa = klasaSelect.value;
    const temat = tematSelect.value;
    const opis = document.getElementById("opis").value;

    if (!data || !temat) {
      alert("Uzupe≈Çnij wszystkie dane.");
      return;
    }

    const frekwencja = [];
    if (uczniowie[klasa]) {
      uczniowie[klasa].forEach((uczen, index) => {
        const zaznaczona = document.querySelector(`input[name="frekwencja_${index}"]:checked`);
        frekwencja.push({ uczen, status: zaznaczona ? zaznaczona.value : "Brak danych" });
      });
    }

    const nowaLekcja = { data, klasa, temat, opis, frekwencja };
    const klucz = `lekcje_${klasa}`;
    const istniejace = JSON.parse(localStorage.getItem(klucz)) || [];
    istniejace.push(nowaLekcja);
    localStorage.setItem(klucz, JSON.stringify(istniejace));
    pokazHistorieLekcji(klasa);
    document.getElementById("data").value = "";
    document.getElementById("opis").value = "";
    updateTematy();
    pokazFrekwencje(klasa);
  }
  
 function usunLekcje(index, klasa) {
  const klucz = `lekcje_${klasa}`;
  const lekcje = JSON.parse(localStorage.getItem(klucz)) || [];
  if (confirm("Czy na pewno chcesz usunƒÖƒá tƒô lekcjƒô?")) {
    lekcje.splice(index, 1);
    localStorage.setItem(klucz, JSON.stringify(lekcje));
    pokazHistorieLekcji(klasa);
    pokazPostep(klasa);
  }
}
function edytujLekcje(index, klasa) {
  const klucz = `lekcje_${klasa}`;
  const lekcje = JSON.parse(localStorage.getItem(klucz)) || [];
  const lekcja = lekcje[index];

  document.getElementById("data").value = lekcja.data;
  document.getElementById("opis").value = lekcja.opis || "";
  klasaSelect.value = lekcja.klasa;
  updateTematy();
  tematSelect.value = lekcja.temat;

  pokazFrekwencje(klasa);

  if (lekcja.frekwencja) {
    lekcja.frekwencja.forEach((f, i) => {
      const radio = document.querySelectorAll(`input[name="frekwencja_${i}"]`);
      radio.forEach(r => {
        if (r.value === f.status) {
          r.checked = true;
        }
      });
    });
  }

  // Usuniƒôcie starej wersji, przed zapisaniem nowej
  lekcje.splice(index, 1);
  localStorage.setItem(klucz, JSON.stringify(lekcje));
  pokazHistorieLekcji(klasa);
  pokazPostep(klasa);
}


  function pokazHistorieLekcji(klasa) {
    const ul = document.getElementById("historia-lekcji");
    ul.innerHTML = "";
    const klucz = `lekcje_${klasa}`;
    const lekcje = JSON.parse(localStorage.getItem(klucz)) || [];

    lekcje.forEach((lekcja, index) => {
  const li = document.createElement("li");
  li.innerHTML = `<strong>${lekcja.data}:</strong> ${lekcja.temat}<br>${lekcja.opis || ""}`;

  if (lekcja.frekwencja && lekcja.frekwencja.length) {
    li.innerHTML += `<br><strong>Frekwencja:</strong><ul>${
      lekcja.frekwencja.map(f => `<li>${f.uczen}: ${f.status}</li>`).join("")
    }</ul>`;
  }

  // Dodaj przyciski Edytuj i Usu≈Ñ
  const edytujBtn = document.createElement("button");
  edytujBtn.textContent = "Edytuj";
  edytujBtn.onclick = () => edytujLekcje(index, klasa);

  const usunBtn = document.createElement("button");
  usunBtn.textContent = "Usu≈Ñ";
  usunBtn.onclick = () => usunLekcje(index, klasa);

  li.appendChild(edytujBtn);
  li.appendChild(usunBtn);
  ul.appendChild(li);
});

  }

  klasaSelect.addEventListener("change", () => {
    updateTematy();
    pokazFrekwencje(klasaSelect.value);
    pokazHistorieLekcji(klasaSelect.value);
	pokazPostep(klasaSelect.value);
  });

  document.addEventListener("DOMContentLoaded", () => {
  updateTematy();
  pokazFrekwencje(klasaSelect.value);
  pokazHistorieLekcji(klasaSelect.value);
  pokazPostep(klasaSelect.value); // ‚Üê TO DODAJ
});
pokazTabeleWyboruKlasy();

  function zaznaczWszystkichObecnosc() {
  const kontener = document.getElementById("frekwencja-box");
  const radios = kontener.querySelectorAll('input[type="radio"]');

  radios.forEach(radio => {
    if (radio.value === "Obecno≈õƒá") {
      radio.checked = true;
    }
  });
}
klasaSelect.addEventListener("change", () => {
  const selected = klasaSelect.value;
  const form = document.getElementById("lekcja-form");

  if (selected) {
    form.style.display = "block";
    updateTematy();
    pokazFrekwencje(selected);
    pokazHistorieLekcji(selected);
    pokazPostep(selected);
  } else {
    form.style.display = "none";
  }
});
function pokazTabeleWyboruKlasy() {
  const tabela = document.querySelector("#tabela-klas tbody");
  tabela.innerHTML = "";

  Object.keys(tematy).forEach(klasa => {
    const klucz = `lekcje_${klasa}`;
    const lekcje = JSON.parse(localStorage.getItem(klucz)) || [];
    const ostatnia = lekcje.length ? lekcje[lekcje.length - 1] : null;

    const tr = document.createElement("tr");

    // nazwa klasy (dla 2H-Jƒôzyk_Piotrowski przekre≈õlona)
    const nazwaKlasy = klasa === "2H-Jƒôzyk_Piotrowski"
      ? `<span style="text-decoration: line-through;">${klasa}</span>`
      : klasa;

    tr.innerHTML = `
      <td style="background-color:${kolory[klasa] || 'transparent'}; width: 10px;"></td>
      <td>${nazwaKlasy}</td>
      <td>${ostatnia ? ostatnia.temat : '<em>‚Äì</em>'}</td>
      <td>${ostatnia ? ostatnia.data : '<em>‚Äì</em>'}</td>
      <td>
        <button onclick="wybierzKlase('${klasa}')">Wybierz i sprawd≈∫ obecno≈õƒá</button>
      </td>
    `;

    tabela.appendChild(tr);
  });
}



function wybierzKlase(klasa) {
  document.getElementById("klasa-select").value = klasa;
  document.getElementById("lekcja-form").style.display = "block";
  document.getElementById("wybor-klasy").style.display = "none";
  document.getElementById("historia-box").style.display = "block";

  // ‚ú® Dodaj ten wiersz:
  document.getElementById("wybrana-klasa").textContent = "Wybrana klasa: " + klasa;

  updateTematy();
  pokazFrekwencje(klasa);
  pokazHistorieLekcji(klasa);
  pokazPostep(klasa);
}



</script>
<!-- Firebase App (core SDK) -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js"></script>
<!-- Firebase Firestore -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js"></script>
<script>
  // Tu wklejasz sw√≥j JavaScript

  // Przyk≈Çad: selektory element√≥w
  const klasaSelect = document.getElementById("klasa-select");  // Tw√≥j select z klasami
  const tematSelect = document.getElementById("temat-select");  // Select z tematami

  // Obiekt z tematami ‚Äî przyk≈Çadowa struktura
  const tematy = {
    "1a": ["Matematyka", "Polski"],
    "2b": ["Biologia", "Historia"]
  };

  function aktualizujTematy() {
    const klasa = klasaSelect.value;
    const listaTematow = tematy[klasa] || [];

    tematSelect.innerHTML = ""; // wyczy≈õƒá

    listaTematow.forEach((temat) => {
      const option = document.createElement("option");
      option.value = temat;
      option.textContent = temat;
      tematSelect.appendChild(option);
    });
  }

  function dodajWlasnyTemat() {
    const nowyTematInput = document.getElementById("nowy-temat");
    const nowyTemat = nowyTematInput.value.trim();

    if (nowyTemat === "") {
      alert("Proszƒô wpisaƒá temat.");
      return;
    }

    const klasa = klasaSelect.value;

    if (!tematy[klasa]) {
      tematy[klasa] = [];
    }
    tematy[klasa].push(nowyTemat);

    aktualizujTematy();

    nowyTematInput.value = "";
    tematSelect.value = nowyTemat;
  }

  // Aktualizuj tematy po zmianie klasy
  klasaSelect.addEventListener("change", aktualizujTematy);

  // Inicjalizacja tematu przy starcie
  aktualizujTematy();

</script>
<footer style="text-align: center; padding: 20px; background-color: #f0f0f0;">
  <div style="margin-bottom: 10px;">
    <img src="teamppp.png" alt="Team P" style="width: 200px; margin: 0 20px;">
    <img src="21 maj 2025, 16_13_32.png" alt="p-librus" style="width: 200px; margin: 0 20px;">
    <img src="stpschool.png" alt="STP School" style="width: 200px; margin: 0 20px;">
  </div>
  <p style="font-size: 14px; color: #555;">P-Librus ¬© 2025</p>
</footer>

<script type="module">
  import { db } from "./firebase.js";
  import { collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";

  // üü¢ Funkcja: zapisz lekcjƒô w chmurze
  async function zapiszLekcje() {
    const klasa = document.getElementById("klasa").value;
    const temat = document.getElementById("temat").value;
    const data = document.getElementById("data").value;

    await addDoc(collection(db, "lekcje"), {
      klasa,
      temat,
      data,
      createdAt: new Date()
    });

    alert("‚úÖ Lekcja zapisana w chmurze!");
  }

  // üü£ Funkcja: pobierz lekcje i wypisz w konsoli
  async function pobierzLekcje() {
    const querySnapshot = await getDocs(collection(db, "lekcje"));
    querySnapshot.forEach((doc) => {
      console.log(doc.id, " => ", doc.data());
    });
  }

  // üß† Po za≈Çadowaniu strony ‚Äî pobierz lekcje
  window.addEventListener("DOMContentLoaded", pobierzLekcje);

  // üñ±Ô∏è Przyk≈Çad: po klikniƒôciu przycisku "Zapisz"
  document.getElementById("zapisz").addEventListener("click", zapiszLekcje);
</script>

	
</body>
</html>



