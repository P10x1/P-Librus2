
<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>P-Librus: Rejestr Lekcji</title>
  <style>
  body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #e6ebed, #f5f7f9);
      margin: 0;
      padding: 0;
    }
    .header {
      display: flex;
      align-items: center;
      padding: 10px 20px;
      background: linear-gradient(to right, #d4dce4, #f2f3f5);
    }
    .logo {
      display: flex;
      align-items: center;
      margin-right: auto;
    }
    .logo img {
      height: 40px;
      margin-right: 10px;
    }
    .logo span {
      font-size: 24px;
      color: #8a2e6e;
      font-weight: bold;
    }
    .user-info {
      margin-right: 20px;
      font-size: 14px;
    }
    .menu {
      display: flex;
      justify-content: center;
      padding: 10px;
      background-color: #edf0f3;
      flex-wrap: wrap;
    }
    .menu-item {
      text-align: center;
      margin: 10px;
      position: relative;
    }
    .menu-item a {
      font-size: 14px;
      display: block;
      padding: 10px 15px;
      background-color: #ffffff;
      border: 1px solid #ccc;
      border-radius: 10px;
      box-shadow: 1px 1px 5px rgba(0,0,0,0.1);
      text-decoration: none;
      color: black;
      transition: background-color 0.3s;
    }
    .menu-item a:hover {
      background-color: #f0f0f0;
    }
    .badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: red;
      color: white;
      font-size: 10px;
      padding: 2px 5px;
      border-radius: 50%;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #dfe9f3, #ffffff);
      padding: 40px;
      color: #333;
    }
    .lesson-box, .history-box {
      background: #ffffff;
      padding: 30px;
      border-radius: 15px;
      margin-bottom: 30px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .dzial-option {
      background-color: #000;
      color: #fff;
      font-weight: bold;
    }
    h2 {
      color: #2a6f97;
    }
    label {
      font-weight: 600;
      display: block;
      margin-top: 15px;
      color: #34495e;
    }
    select, textarea, input[type="date"], button {
      width: 100%;
      padding: 10px;
      margin-top: 8px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 14px;
    }
    button {
      background: #2a6f97;
      color: white;
      border: none;
      border-radius: 7px;
      cursor: pointer;
      margin-top: 20px;
      font-weight: bold;
      transition: background 0.3s;
    }
    button:hover {
      background: #1b4965;
    }
    ul {
      padding-left: 25px;
    }
    .frekwencja-wrapper {
      margin-bottom: 15px;
      padding: 10px;
      background: #f0f8ff;
      border-radius: 8px;
    }
    .frekwencja-wrapper label {
      font-weight: 500;
      margin-bottom: 5px;
    }
    .frekwencja-wrapper span {
      margin-right: 10px;
    }
	#tabela-klas th, #tabela-klas td {
  border-bottom: 1px solid #ccc;
  padding: 8px;
  text-align: center;
}
#tabela-klas tr:hover {
  background-color: #f2f2f2;
}
.top-alert {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background-color: #2a6f97;
  color: #ffffff;
  padding: 1em 2em;
  font-weight: bold;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  z-index: 1000;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.close-btn {
  background: none;
  border: none;
  font-size: 1.5em;
  line-height: 1;
  cursor: pointer;
  color: #ffffff;
}


  </style>
</head>
<body>

<div class="top-alert" id="topAlert">
  <span class="alert-message">Nowa wersja dziennika elektronicznego, Nowe możliwości. Sprawdź sam!</span>
  <button class="close-btn" onclick="document.getElementById('topAlert').style.display='none'">×</button>
</div>

<script type="module">
  // Importy z Firebase CDN
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
  import { getFirestore, collection, addDoc, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

  const firebaseConfig = {
    // twoja konfiguracja
  };// Your web app's Firebase configuration (wklej tutaj swój config)
  const firebaseConfig = {
  apiKey: "AIzaSyDlSm_Cg8Pz0rPsExKro958vjRDUD_i95Y",
  authDomain: "p-librus.firebaseapp.com",
  projectId: "p-librus",
  storageBucket: "p-librus.firebasestorage.app",
  messagingSenderId: "1018564561209",
  appId: "1:1018564561209:web:14fc2df790ca838837c0e8"
};

 

  // teraz możesz używać db, np. dodawanie i pobieranie dokumentów
</script>





<div class="header">
    <div class="logo">
      <img src="21 maj 2025, 16_13_32.png" alt="P-Librus logo">
      <span>P-Librus</span>
    </div>
    <div class="user-info">
      Zalogowany jako: <strong>Piotr Rejmentowski (nauczyciel)</strong>
    </div>

  </div>

  <div class="menu">
    <div class="menu-item"><a href="indywidualni.html">Indywidualni</a></div>
    <div class="menu-item"><a href="Lekcja.html">Lekcja</a></div>
    <div class="menu-item"><a href="Oceny.html">Oceny</a><div class="badge">5</div></div>
    <div class="menu-item"><a href="Organizacja.html">Organizacja</a><div class="badge">3</div></div>
    <div class="menu-item"><a href="wiadomosci.html">Wiadomości</a></div>
    <div class="menu-item"><a href="ogloszenia.html">Ogłoszenia</a><div class="badge">1</div></div>
    <div class="menu-item"><a href="Terminarz.html">Terminarz</a><div class="badge">6</div></div>
  </div>
<div class="lesson-box">
  <h2>PANEL NAUCZYCIELA LEKCJI</h2>

  <div id="wybor-klasy">
  <h2>Wybierz klasę do wpisania nowej lekcji lub edycji.</h2>
  <table style="width: 100%; border-collapse: collapse;" id="tabela-klas">
    <thead>
      <tr>
        <th><i>Klasa</th>
        <th><i>Ostatni temat</th>
        <th><i>Data ostatniej lekcji</th>
        <th></th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- Ukryty select, który nadal używany w kodzie -->
<select id="klasa-select" style="display: none;">
  <option value="6F-Język_Piotrowski">6F - Język Piotrowski</option>
  <option value="6J-Język_Piotrowski">6J - Język Piotrowski</option>
  <option value="7A-Język_Piotrowski">7A - Język Piotrowski</option>
  <option value="7B-Język_Piotrowski">7B - Język Piotrowski</option>
  <option value="7C-Język_Piotrowski">7C - Język Piotrowski</option>
  <option value="8D-Język_Piotrowski">8D - Język Piotrowski</option>
  <option value="8E-Język_Piotrowski">8E - Język Piotrowski</option>
  <option value="1G-Język_Piotrowski">1G - Język Piotrowski</option>
  <option value="2H-Język_Piotrowski">2H - Język Piotrowski</option>
  <option value="6F-Biologia">6F-Biologia</option>
  <option value="6J-Biologia">6J-Biologia</option>
  <option value="4K-Przyroda">4K-Przyroda</option>
  <option value="5i-Biologia">5i - Biologia</option>
  <option value="7A-Biologia">7A - Biologia</option>
  <option value="8D-Biologia">8D - Biologia</option>
  <option value="Edukacja_ogólna">Edukacja ogólna</option>
</select>


  <div id="lekcja-form" style="display: none;">
<h3 id="wybrana-klasa" style="color: #2a6f97;"></h3>

  <label for="przedmiot-select">Przedmiot:</label>
  <select id="przedmiot-select">
    <option value="biologia">Biologia</option>
    <option value="jezyk piotrowski">Język Piotrowski</option>
    <option value="geografia">Geografia</option>
    <option value="fizyka">Fizyka</option>
    <option value="jezyk angielski">Język angielski</option>
	<option value="przyroda">Przyroda</option>
    <option value="inny">Inny</option>
	<option value="Edukacja_ogólna">Edukacja ogólna</option>
  </select>

  <label for="data">Data:</label>
  <input type="date" id="data" />
  
  <br><br>
  <div class="lesson-box">
  <h2>Postęp realizacji materiału</h2>
  <div id="postep-box"></div>
</div>

<script>
function pokazPostep(klasa) {
  const box = document.getElementById("postep-box");
  box.innerHTML = "";

  const wszystkieTematy = tematy[klasa] || [];
  const klucz = `lekcje_${klasa}`;
  const lekcje = JSON.parse(localStorage.getItem(klucz)) || [];

  const zrealizowaneTematy = new Set(lekcje.map(l => l.temat));

  const liczbaZrealizowanych = wszystkieTematy.filter(t => zrealizowaneTematy.has(t)).length;
  const liczbaWszystkich = wszystkieTematy.length;
  const procent = liczbaWszystkich ? Math.round((liczbaZrealizowanych / liczbaWszystkich) * 100) : 0;

  box.innerHTML = `
    <p>Zrealizowano <strong>${liczbaZrealizowanych}</strong> z <strong>${liczbaWszystkich}</strong> tematów (${procent}%)</p>
    <div style="background: #eee; border-radius: 10px; overflow: hidden; height: 20px;">
      <div style="width: ${procent}%; background: #2a6f97; height: 100%; color: white; text-align: center; font-size: 12px;">
        ${procent}%
      </div>
    </div>
  `;
}
function pokazPostep(klasa) {
  const box = document.getElementById("postep-box");
  box.innerHTML = "";

  const wszystkieTematy = (tematy[klasa] || []).filter(t => {
  const tLower = t.toLowerCase();
  return !t.startsWith("DZIAŁ") &&
    (tLower.includes("powtórzenie") ||
     tLower.includes("sprawdzian") ||
     tLower.includes("omówienie sprawdzianu") ||
     tLower.includes("egzamin") ||
	 tLower.includes("Jak na egzaminie") ||
     tLower === "inne" ||
     (!t.startsWith("DZIAŁ") && !tLower.includes("dział"))); // zwykłe białe tematy
});

  const klucz = `lekcje_${klasa}`;
  const lekcje = JSON.parse(localStorage.getItem(klucz)) || [];

  const zrealizowaneTematy = new Set(lekcje.map(l => l.temat));
  const liczbaZrealizowanych = wszystkieTematy.filter(t => zrealizowaneTematy.has(t)).length;
  const liczbaWszystkich = wszystkieTematy.length;
  const procent = liczbaWszystkich ? Math.round((liczbaZrealizowanych / liczbaWszystkich) * 100) : 0;

  let ostatniaLekcja = lekcje.length > 0 ? lekcje[lekcje.length - 1] : null;

  box.innerHTML = `
    <p>Zrealizowano <strong>${liczbaZrealizowanych}</strong> z <strong>${liczbaWszystkich}</strong> tematów (${procent}%)</p>
    <div style="background: #eee; border-radius: 10px; overflow: hidden; height: 20px; margin-bottom: 10px;">
      <div style="width: ${procent}%; background: #2a6f97; height: 100%; color: white; text-align: center; font-size: 12px;">
        ${procent}%
      </div>
    </div>
    ${
      ostatniaLekcja
        ? `
          <p><strong>Ostatni temat:</strong> ${ostatniaLekcja.temat}</p>
          <p><strong>Data lekcji:</strong> ${ostatniaLekcja.data}</p>
          ${ostatniaLekcja.opis ? `<p><strong>Komentarz:</strong> ${ostatniaLekcja.opis}</p>` : ""}
        `
        : `<p>Brak zrealizowanych tematów.</p>`
    }
  `;
}



</script>
  
  

  <label for="temat-select">Temat lekcji:</label>
  <select id="temat-select"></select>
  
  <label for="nowy-temat">Dodaj własny temat lekcji:</label>
<textarea id="opis" rows="3"></textarea>
<button type="button" onclick="dodajWlasnyTemat()">Dodaj temat</button>

<label for="opis">Dodatkowe notatki:</label>
<textarea id="opis" rows="3"></textarea>

  <label>Frekwencja uczniów:</label>
<button type="button" onclick="zaznaczWszystkichObecnosc()" style="margin-bottom: 10px;">Zaznacz wszystkich jako Obecność</button>
<div id="frekwencja-box"></div>

  <button onclick="zapiszLekcje()">Zapisz lekcję</button>
</div>

<div class="history-box" id="historia-box" style="display: none;">
  <h2>Historia lekcji</h2>
  <ul id="historia-lekcji"></ul>
</div>

</div> <!-- zamknięcie #lekcja-form -->

<script>
  const uczniowie = {
    '6F-Język_Piotrowski': ['Ola', 'Julia', 'Natan', 'Filip'],
    '6J-Język_Piotrowski': ['Zuzia', 'Kasia', 'Maja'],
    '7A-Język_Piotrowski': ['Agata', 'Tadeusz', 'Piotr'],
    '7B-Język_Piotrowski': ['Gosia', 'Grzesiek', 'Agnieszka', 'Adam'],
    '7C-Język_Piotrowski': ['Wiesia', 'Alina', 'Bożena', 'Halinka'],
    '8D-Język_Piotrowski': ['Mirek', 'Ela', 'Ula'],
    '8E-Język_Piotrowski': ['Ola', 'Maria', 'Marta'],
	'1G-Język_Piotrowski': ['Jagoda', 'Szymon', 'Antek', 'Lena'],
	'2H-Język_Piotrowski': ['Andrzej', 'Maciej', 'Patryk'],
	'6F-Biologia': ['Ola', 'Julia', 'Natan', 'Filip'],
	'6J-Biologia': ['Zuzia', 'Kasia', 'Maja'],	
	'4K-Przyroda': ['Tymek','Tosia','Dobromiła','Kasjan'],
	'7A-Biologia': ['Agata', 'Tadeusz', 'Piotr'],
    '5i-Biologia': ['Jagoda', 'Krystian', 'Justyna'],
	'8D-Biologia': ['Mirek', 'Ela', 'Ula'],
	'Edukacja_ogólna': ['Julia','Ola','Zuzia','Tadeusz','Grzesiek','Adam','Wiesia','Bożena','Jagoda','Antek','Maciej','Tosia']
  };

  const tematy = {
  
    "6F-Język_Piotrowski": ["Inne", "Kolory i pomieszczenia", "Alfabet i znaki piotrowskie", "Liczby","Daty", "Gramatyka piotrowska","Past simple - Wprowadzenie","Past simple - Ogólność i Upodobania","Past simple - Regularność i czas","Past simple - Osobowość i jej opis",  "Zaimki osobowe - Wprowadzenie","Present Simple - Wprowadzenie","Powtórzenie do egzaminu 1", "Powtórzenie do egzaminu 2", "Egzamin szóstoklasisty"],
      "6J-Język_Piotrowski": ["Inne", "Kolory i pomieszczenia", "Alfabet i znaki piotrowskie", "Liczby","Daty", "Gramatyka piotrowska","Past simple - Wprowadzenie","Past simple - Ogólność i Upodobania","Past simple - Regularność i czas","Past simple - Osobowość i jej opis",  "Zaimki osobowe - Wprowadzenie","Present Simple - Wprowadzenie","Powtórzenie do egzaminu 1", "Powtórzenie do egzaminu 2", "Egzamin szóstoklasisty"],
      "7A-Język_Piotrowski": ["Inne", "DZIAŁ 1 - ZDROWIE","Choroby i bóle","Części ciała i zdrowy styl życia","Past Simple","Etapy życia","Przedmioty osobiste","Past simple","Jak na egzaminie","DZIAŁ 2 - ŚWIAT ORAZ PRZYRODA","Kontynenty oraz kraje","Zwierzęta, Krajobrazy, Rośliny","Czas poprawny, Zapis czasu słownie","Present Simple","Jak na egzaminie (2)","DZIAŁ 3 - ŻYCIE PRYWATNE", "Rodzina i znajomi", "Czas wolny, Wydarzenia", "Present Cintus", "Jak na egzaminie (3)","DZIAŁ 4 - CZŁOWIEK", "Cechy charakteru, Wygląd zewnętrzny","Ubrania, Przedmioty osobiste", "Etapy życia","Zaimki osobowe", "Porównanie czasów teraźniejszych","Jak na egzaminie (4)"],
      "7B-Język_Piotrowski": ["Inne", "DZIAŁ 1 - CZŁOWIEK","Vocabulary (1)", "Gramar (1)", "Buking i writing (1)", "Powtórzenie wiadomości (1)","Sprawdzian (1)","Omówienie sprawdzianu (1)", "DZIAŁ 2 - ZDROWIE","Vocabulary (2)", "Gramar (2)", "Buking i writing (2)", "Powtórzenie wiadomości (2)","Sprawdzian (2)","Omówienie sprawdzianu (2)", "DZIAŁ 3 - ŻYCIE PRYWATNE","Vocabulary (3)", "Gramar (3)", "Buking i writing (3)", "Powtórzenie wiadomości (3)","Sprawdzian (3)","Omówienie sprawdzianu (3)", "DZIAŁ 4 - ŚWIAT I PRZYRODA","Vocabulary (4)", "Gramar (4)", "Buking i writing (4)", "Powtórzenie wiadomości (4)","Sprawdzian (4)","Omówienie sprawdzianu (4)"],
	  "7C-Język_Piotrowski": ["Inne", "DZIAŁ 1 - CZŁOWIEK","Cechy charakteru","Ubrania","Wygląd zewnętrzny","Etapy życia","Przedmioty osobiste","Past simple","Powtórzenie wiadomości (1)","Sprawdzian (1)","Omówienie sprawdzianu (1)","DZIAŁ 2 - ZDROWIE","Choroby i bóle","Present simple","Powtórzenie wiadomości (2)","Sprawdzian (2)","Omówienie sprawdzianu (2)","DZIAŁ 3 - ŻYCIE PRYWATNE", "Rodzina i znajomi", "Czas wolny i święta", "Past simple i Present simple - Porównanie", "Powtórzenie wiadomości (3)","Sprawdzian (3)","Omówienie sprawdzianu (3)","DZIAŁ 4 - ŚWIAT I PRZYRODA", "Kraje i kontynenty","Przyroda i zwierzęta", "Zegary, Czas i ich odczytywanie","Present Cintus", "Powtórzenie wiadomości (4)","Sprawdzian (4)","Omówienie sprawdzianu (4)"],
      "8D-Język_Piotrowski": ["Inne", "DZIAŁ 1 - MIEJSCE ZAMIESZKANIA","Rodzaje miejsc zamieszkania","Meble","Na zewnątrz","Określenia domów i pomieszczenia","Present simple","Powtórzenie wiadomości (1)","Sprawdzian (1)","Omówienie sprawdzianu (1)","DZIAŁ 2 - EDUKACJA","Przedmioty fizyczne","Przedmioty lekcyjne","Pracownicy i pomieszczenia w szkole","Czasowniki szkolne","Present hadsing","Powtórzenie wiadomości (2)","Sprawdzian (2)","Omówienie sprawdzianu (2)","DZIAŁ 3 - PRACA", "Zawody", "Odmiana zawodów przez osoby","Miejsca prac","Present past","Zaimki osobowe", "Powtórzenie wiadomości (3)","Sprawdzian (3)","Omówienie sprawdzianu (3)"],
      "8E-Język_Piotrowski": ["Inne", "DZIAŁ 1 - MIEJSCE ZAMIESZKANIA","Vocabulary (1)", "Gramar (1)", "Buking i writing (1)", "Powtórzenie wiadomości (1)","Sprawdzian (1)","Omówienie sprawdzianu (1)", "DZIAŁ 2 - EDUKACJA","Vocabulary (2)", "Gramar (2)", "Buking i writing (2)", "Powtórzenie wiadomości (2)","Sprawdzian (2)","Omówienie sprawdzianu (2)", "DZIAŁ 3 - PRACA","Vocabulary (3)", "Gramar (3)", "Buking i writing (3)", "Powtórzenie wiadomości (3)","Sprawdzian (3)","Omówienie sprawdzianu (3)"],
	  "1G-Język_Piotrowski": ["Inne", "DZIAŁ 1 - SPORT","Vocabulary (1)", "Gramar (1)", "Buking i writing (1)", "Powtórzenie wiadomości (1)","Sprawdzian (1)","Omówienie sprawdzianu (1)", "DZIAŁ 2 - KULTURA","Vocabulary (2)", "Gramar (2)", "Buking i writing (2)", "Powtórzenie wiadomości (2)","Sprawdzian (2)","Omówienie sprawdzianu (2)", "DZIAŁ 3 - TRANSPORT I TURYSTYKA","Vocabulary (3)", "Gramar (3)", "Buking i writing (3)", "Powtórzenie wiadomości (3)","Sprawdzian (3)","Omówienie sprawdzianu (3)"],
	  "2H-Język_Piotrowski": ["Inne", "DZIAŁ 1 - ŚWIAT PRZYRODY","Vocabulary (1)", "Gramar (1)", "Buking i writing (1)", "Powtórzenie wiadomości (1)","Sprawdzian (1)","Omówienie sprawdzianu (1)", "DZIAŁ 2 - ZDROWIE","Vocabulary (2)", "Gramar (2)", "Buking i writing (2)", "Powtórzenie wiadomości (2)","Sprawdzian (2)","Omówienie sprawdzianu (2)"],
  	  "6F-Biologia": ["Inne", "DZIAŁ 1 - Świat zwierząt","W królestwie zwierząt", "Tkanki : Nabłonkowa, mięśniowa i nerwowa", "Tkanka Łączna", "Powtórzenie wiadomości (1)","Sprawdzian (1)","Omówienie sprawdzianu (1)", "DZIAŁ 2 - Od parzydełkowców do pierścienic","Parzydełkowce - najprostrze zwierzęta tkankowe", "Płazińce - zwierzęta, które mają płaskie ciało", "Nicienie - zwierzęta, które mają nitkowate ciało","Pierścienice - zwierzęta które mają segemntowane ciało", "Powtórzenie wiadomości (2)","Sprawdzian (2)","Omówienie sprawdzianu (2)", "DZIAŁ 3 - Stawonogi i mięczaki","Cechy stawonogów", "Skorupiaki - stawonogi, które mają twardy pancerz", "Owady - stawonogi zdolne do lotu","Pajęczaki - stawonogi, które mają czety pary odnóży","Mięczaki - zwierzęta które mają muszlę", "Powtórzenie wiadomości (3)","Sprawdzian (3)","Omówienie sprawdzianu (3)","DZIAŁ 4 - Kręgowce zmiennocieplne","Ryby - Kręgowce środowisk wodnych", "Przegląd i znaczenie ryb", "Płazy - Kręgowce wodno-lądowe","Przegląd i znaczenie płazów","Gady - Kręgowce, które opanowały ląd","Przegląd i znaczenie gadów", "Powtórzenie wiadomości (4)","Sprawdzian (4)","Omówienie sprawdzianu (4)", "DZIAŁ 5 - Kręgowce stałocieplne","Ptaki - Kręgowce zdolne do lotu", "Przegląd i znaczenie ptaków", "Ssaki - kręgowce, które karmią młode mlekiem","Przegląd i znaczenie ssaków", "Powtórzenie wiadomości (3)","Sprawdzian (3)","Omówienie sprawdzianu (3)"],
	  "6J-Biologia": ["Inne", "DZIAŁ 1 - Świat zwierząt","W królestwie zwierząt", "Tkanki : Nabłonkowa, mięśniowa i nerwowa", "Tkanka Łączna", "Powtórzenie wiadomości (1)","Sprawdzian (1)","Omówienie sprawdzianu (1)", "DZIAŁ 2 - Od parzydełkowców do pierścienic","Parzydełkowce - najprostrze zwierzęta tkankowe", "Płazińce - zwierzęta, które mają płaskie ciało", "Nicienie - zwierzęta, które mają nitkowate ciało","Pierścienice - zwierzęta które mają segemntowane ciało", "Powtórzenie wiadomości (2)","Sprawdzian (2)","Omówienie sprawdzianu (2)", "DZIAŁ 3 - Stawonogi i mięczaki","Cechy stawonogów", "Skorupiaki - stawonogi, które mają twardy pancerz", "Owady - stawonogi zdolne do lotu","Pajęczaki - stawonogi, które mają czety pary odnóży","Mięczaki - zwierzęta które mają muszlę", "Powtórzenie wiadomości (3)","Sprawdzian (3)","Omówienie sprawdzianu (3)","DZIAŁ 4 - Kręgowce zmiennocieplne","Ryby - Kręgowce środowisk wodnych", "Przegląd i znaczenie ryb", "Płazy - Kręgowce wodno-lądowe","Przegląd i znaczenie płazów","Gady - Kręgowce, które opanowały ląd","Przegląd i znaczenie gadów", "Powtórzenie wiadomości (4)","Sprawdzian (4)","Omówienie sprawdzianu (4)", "DZIAŁ 5 - Kręgowce stałocieplne","Ptaki - Kręgowce zdolne do lotu", "Przegląd i znaczenie ptaków", "Ssaki - kręgowce, które karmią młode mlekiem","Przegląd i znaczenie ssaków", "Powtórzenie wiadomości (3)","Sprawdzian (3)","Omówienie sprawdzianu (3)"],
      "4K-Przyroda": ["Inne", "DZIAŁ 1 - Poznajemy warsztat przyrodnika","Przyroda i jej składniki", "Jak poznawać przyrodę?", "Przyrządy i pomoce przyrodnika","Określamy kierunki geograficzne","Co pokazujemy na planach?","Jak czytamy plany i mapy?","Jak się orientować w terenie?", "Powtórzenie wiadomości (1)","Sprawdzian (1)","Omówienie sprawdzianu (1)", "DZIAŁ 2 - Poznajemy pogodę i inne zjawiska przyrodnicze", "Substancje wokół nas", "Woda występuje w trzech stanach skupienia", "Składniki pogody","Obserwujemy pogodę",",,Wędrówka'' słońca po niebie", "Powtórzenie wiadomości (2)","Sprawdzian (2)","Omówienie sprawdzianu (2)", "DZIAŁ 3 - Poznajemy świat organizmów", "Organizmy mają wspólne cechy", "Organizmy różnią się sposobem odżywiania", " Zależności pokarmowe między organizmami","Rośliny i zwierzęta wokół nas", "Powtórzenie wiadomości (3)","Sprawdzian (3)","Omówienie sprawdzianu (3)", "DZIAŁ 4 - Odkrywamy tajemnice ciała człowieka","Trawienie i wchłanianie pokarmu", "Układ krwionośny transportuje krew", "Układ oddechowy zapewnia wymianę gazową","Szkielet i mięsnie zapewniają ruch","Układ nerwowy kontroluje pracę organizmu","Układ rozrodczy umożliwia wydawanie na świat potomstwa", "Powtórzenie wiadomości (4)","Sprawdzian (4)","Omówienie sprawdzianu (4)","DZIAŁ 5 - Odkrywamy tajemnice zdrowia","Zdrowy styl życia", "Choroby, którymi można się zarazić", "Jak sobie radzić w niebezpiecznych sytuacjach","Uzależnienia są groźne", "Powtórzenie wiadomości (5)","Sprawdzian (5)","Omówienie sprawdzianu (5)", "DZIAŁ 6 - Poznajemy krajobraz najbliższej okolicy","Co to jest krajobraz?", "Ukształtowanie terenu", "Czy wszystkie skały są twarde?","Wody słodkie i słone","Krajobraz wczoraj i dziś", "Obszary i obiekty chronione", "Powtórzenie wiadomości (6)","Sprawdzian (6)","Omówienie sprawdzianu (6)", "DZIAŁ 7 - Odkrywamy tajemnice życia w wodzie i na lądzie","Warunki życia w wodzie", "Z biegiem rzeki", "Życie w jeziorze","Warunki życia na lądzie","Las ma budowę warstwową", "Jakie drzewa rosną w lesie?", "Na łące", "Na polu uprawnym", "Powtórzenie wiadomości (7)","Sprawdzian (7)","Omówienie sprawdzianu (7)"],
	  "7A-Biologia": ["Inne", "DZIAŁ 1 - Organizm człowieka. Skóra - powłoka organizmu", "Organizm człowieka jako funkcjonalna całość", "Budowa i funkcje skóry", "Higiena i choroby skóry", "Powtórzenie wiadomości (1)", "Praca klasowa (1)", "Omówienie pracy klasowej (1)", "DZIAŁ 2 - Aparat ruchu", "Aparat ruchu. Budowa szkieletu", "Budowa kości", "Budowa i rola szkieletu osiowego", "Szkielet kończyn", "Budowa i rola mięśni", "Higienia i choroby aparatu ruchu", "Powtórzenie wiadomości (2)", "Praca klasowa (2)", "Omówienie pracy klasowej (2)", "DZIAŁ 3 - Układ pokarmowy", "Pokarm - budulec i źródło energii", "Witaminy, sole mineralne, woda", "Budowa i rola układu pokarmowego", "Higienia i choroby układu pokarmowego", "Powtórzenie wiadomości (3)", "Praca klasowa (3)", "Omówienie pracy klasowej (3)", "DZIAŁ 4 - Układ krążenia", "Budowa i funckje krwi", "Krążenie krwi", "Budowa i działanie serca", "Higienia i choroby układu krwionośnego", "Układ limfatyczny", "Budowa i działanie układu odpornościowego", "Zaburzenia funkcjonowania układu odpornościowego", "Powtórzenie wiadomości (4)", "Praca klasowa (4)", "Omówienie pracy klasowej (4)", "DZIAŁ 5 - Układ oddechowy", "Budowa i rola układu oddechowego", "Mechanizm oddychania", "Higienia i choroby układu oddechowego", "Powtórzenie wiadomości (5)", "Praca klasowa (5)", "Omówienie pracy klasowej (5)", "DZIAŁ 6 - Układ Wydalniczy", "Budowa i działanie układu wydalniczego", "Higienia i choroby układu wydalniczego", "Powtórzenie wiadomości (6)", "Praca klasowa (6)", "Omówienie pracy klasowej (6)", "DZIAŁ 7 - Regulacja nerwowo-hormonalna", "Budowa i funkcjonowanie układu hormonalnego", "Zaburzenia funkcjonowania układu hormonalnego", "Budowa i rola układu hormonalnego", "Ośrodkowy układ nerwowy", "Obwodowy układ nerwowy. Odruchy", "Higiena układu nerwowego", "Powtórzenie wiadomości (7)", "Praca klasowa (7)", "Omówienie pracy klasowej (7)", "DZIAŁ 8 - Narządy zmysłów", "Budowa i działanie narządu wzroku", "Ucho - narząd słuchu i równowagi", "Higienia oka i ucha", "Zmysły powonienia, smaku i dotyku", "Powtórzenie wiadomości (8)", "Praca klasowa (8)", "Omówienie pracy klasowej (8)", "DZIAŁ 9 - Rozmnażanie i rozwój człowieka", "Męski układ rozrodczy", "Żeński układ rozrodczy", "Funkcjonowanie żeńskiego układu rozrodczego", "Rozwój człowieka - od poczęcia do narodzin", "Rozwój człowieka - od narodzin do starości", "Higienia i choroby układu rozrodczego", "Powtórzenie wiadomości (9)", "Praca klasowa (9)", "Omówienie pracy klasowej (9)", "DZIAŁ 10 - Równowaga wewnętrzn organizmu", "Mechanizmy regulacyjne organizmu", "Choroba - zaburzenie homeostazy", "Powtórzenie wiadomości (10)", "Praca klasowa (10)", "Omówienie pracy klasowej (10)"],
      "5i-Biologia": ["Inne", "DZIAŁ 1 - Biologia - nauka o życiu", "Biologia jako nauka", "Jak poznawać biologię", "Obserwacje mikroskopowe", "Powtórzenie wiadomości (1)", "Praca klasowa (1)", "Omówienie pracy klasowej (1)", "DZIAŁ 2 - Budowa i czynności życiowe organizmów", "Składniki chemiczne organizmów", "Budowa komórki zwierzęcej", "Komórka roślinna. 1nne rodzaje komórek", "Samożywność", "Cudzożywność", "Sposoby oddychania organizmów", "Powtórzenie wiadomości (2)", "Praca klasowa (2)", "Omówienie pracy klasowej (2)", "DZIAŁ 3 - Wirusy, bakterie, protisty i grzyby", "Klasyfikacja organizmów", "Wirusy i bakterie", "Różnorodność protistów", "Budowa i rożnorodność grzybów. Protosty", "Powtórzenie wiadomości (3)", "Praca klasowa (3)", "Omówienie pracy klasowej (5)", "DZIAŁ 4 - Tkanki i organy roślinne", "Tkanki roślinne", "Korzeń  organ podziemny rośliny", "Pęd. Budowa i funkcje łodygi", "Liść - wytwórnia pokarmu", "DZIAŁ 5 - Różnorodność roślin", "Mchy", "Paprotniki", "Nagonasienne", "Okrytonasienne", "Rozprzestrzenianie się roślin okrytonasiennych", "Znaczenie i przegląd roślin okrytonasiennych", "Powtórzenie pracy klasowej (5)", "Praca klasowa (5)", "Omówienie pracy klasowej (5)"],
      "8D-Biologia": ["Inne", "DZIAŁ 1 - Genetyka", "Czym jest genetyka?", "Nośnik informacji genetycznej - DNA", "Podziały komórkowe", "Podstawowe prawa dziedziczenia", "Dziedziczenie cech u człowieka", "Dziedziczenie ", "Dziedziczenie płci u człowieka", "Dziedziczenie grup krwi", "Mutacje", "Powtórzenie wiadomości (1)", "Praca klasowa (1)", "Omówienie pracy klasowej (1)", "DZIAŁ 2 - Ewolucja życia", "Źródła wiedzy o ewolucji", "Mechanizmy ewolucji", "Pochodznie człowieka", "Powtórzenie wiadomości (2)", "Praca klasowa (2)", "Omówienie pracy klasowej (2)", "DZIAŁ 3 - Ekologia", "Organizm a środowisko", "Cechy populacji", "Konkurencja", "Drapieżnictwo. Roślinożerność", "Pasyżytnictwo", "Nieantagonistyczne zależności między gatunkami", "Czym jest ekosystem?", "Zależności pokarmowe", "Materia i energia w ekosystemie", "Powtórzenie wiadomości (3)", "Praca klasowa (3)", "Omówienie pracy klasowej (3)", "DZIAŁ 4 - Człowiek i środowisko", "Rożnorodność biologiczna", "Wpływ człowieka na różnorodność biologiczną", "Racjonalne gospodarowanie zasobami przyrody", "Sposoby ochrony przyrody", "Powtórzenie wiadomości (4)", "Praca klasowa (4)", "Omówienie pracy klasowej (4)"],
	  "Edukacja_ogólna": ["Inne","Temat edukacji ogólnej", "Powtórzenie przed sprawdzianem","Sprawdzian/Praca pisemna", "Omówienie sprawdzianu"]
 
	};

  const klasaSelect = document.getElementById("klasa-select");
  const tematSelect = document.getElementById("temat-select");

  function updateTematy() {
  tematSelect.innerHTML = "";
  const klasa = klasaSelect.value;

  const klucz = `lekcje_${klasa}`;
  const lekcje = JSON.parse(localStorage.getItem(klucz)) || [];
  const zrealizowaneTematy = new Set(lekcje.map(l => l.temat));

  if (tematy[klasa]) {
    tematy[klasa].forEach(t => {
      const option = document.createElement("option");
      option.value = t;
      option.textContent = t;

      if (t.startsWith("DZIAŁ")) {
        option.classList.add("dzial-option");
      }

      const tLower = t.toLowerCase();  
      if (
        tLower.includes("powtórzenie wiadomości") ||
        tLower.includes("sprawdzian") ||
        tLower.includes("omówienie sprawdzianu") ||
        tLower.includes("powtórzenie do egzaminu 1") ||
        tLower.includes("powtórzenie do egzaminu 2") ||
        tLower.includes("egzamin szóstoklasisty") ||
        tLower.includes("jak na egzaminie") ||
		tLower.includes("praca klasowa") ||
		tLower.includes("omówienie pracy klasowej") ||
        tLower.includes("inne")
      ) {
        option.style.backgroundColor = "#ccffcc"; // jasnozielony
      }

      if (zrealizowaneTematy.has(t)) {
        option.style.backgroundColor = "yellow"; // temat już zrobiony
      }

      tematSelect.appendChild(option);
    });
  }

  // automatycznie zaznacz następny temat
  wybierzNastepnyTemat(klasa, zrealizowaneTematy);
}

function wybierzNastepnyTemat(klasa, zrealizowaneTematy) {
  const lista = tematy[klasa] || [];

  for (let temat of lista) {
    if (!zrealizowaneTematy.has(temat) && !temat.startsWith("DZIAŁ")) {
      tematSelect.value = temat;
      break;
    }
  }
}

  function pokazFrekwencje(klasa) {
    const kontener = document.getElementById("frekwencja-box");
    kontener.innerHTML = "";

    if (!uczniowie[klasa]) return;

    uczniowie[klasa].forEach((uczen, index) => {
      const wrapper = document.createElement("div");
      wrapper.className = "frekwencja-wrapper";

      const label = document.createElement("label");
      label.textContent = uczen;
      wrapper.appendChild(label);

      ["Obecność", "Spóźnienie", "Nieobecność nieusprawiedliwiona", "Nieobecność usprawiedliwiona", "Zwolnienie", "Rekolekcje", "Egzamin", "Sanatorium", "Wycieczka", "Konkurs", "Wolontariat"].forEach(opcja => {
        const radio = document.createElement("input");
        radio.type = "radio";
        radio.name = `frekwencja_${index}`;
        radio.value = opcja;

        const span = document.createElement("span");
        span.textContent = opcja;

        wrapper.appendChild(radio);
        wrapper.appendChild(span);
      });

      kontener.appendChild(wrapper);
    });
  }

  function zapiszLekcje() {
    const data = document.getElementById("data").value;
    const klasa = klasaSelect.value;
    const temat = tematSelect.value;
    const opis = document.getElementById("opis").value;

    if (!data || !temat) {
      alert("Uzupełnij wszystkie dane.");
      return;
    }

    const frekwencja = [];
    if (uczniowie[klasa]) {
      uczniowie[klasa].forEach((uczen, index) => {
        const zaznaczona = document.querySelector(`input[name="frekwencja_${index}"]:checked`);
        frekwencja.push({ uczen, status: zaznaczona ? zaznaczona.value : "Brak danych" });
      });
    }

    const nowaLekcja = { data, klasa, temat, opis, frekwencja };
    const klucz = `lekcje_${klasa}`;
    const istniejace = JSON.parse(localStorage.getItem(klucz)) || [];
    istniejace.push(nowaLekcja);
    localStorage.setItem(klucz, JSON.stringify(istniejace));
    pokazHistorieLekcji(klasa);
    document.getElementById("data").value = "";
    document.getElementById("opis").value = "";
    updateTematy();
    pokazFrekwencje(klasa);
  }
  
 function usunLekcje(index, klasa) {
  const klucz = `lekcje_${klasa}`;
  const lekcje = JSON.parse(localStorage.getItem(klucz)) || [];
  if (confirm("Czy na pewno chcesz usunąć tę lekcję?")) {
    lekcje.splice(index, 1);
    localStorage.setItem(klucz, JSON.stringify(lekcje));
    pokazHistorieLekcji(klasa);
    pokazPostep(klasa);
  }
}
function edytujLekcje(index, klasa) {
  const klucz = `lekcje_${klasa}`;
  const lekcje = JSON.parse(localStorage.getItem(klucz)) || [];
  const lekcja = lekcje[index];

  document.getElementById("data").value = lekcja.data;
  document.getElementById("opis").value = lekcja.opis || "";
  klasaSelect.value = lekcja.klasa;
  updateTematy();
  tematSelect.value = lekcja.temat;

  pokazFrekwencje(klasa);

  if (lekcja.frekwencja) {
    lekcja.frekwencja.forEach((f, i) => {
      const radio = document.querySelectorAll(`input[name="frekwencja_${i}"]`);
      radio.forEach(r => {
        if (r.value === f.status) {
          r.checked = true;
        }
      });
    });
  }

  // Usunięcie starej wersji, przed zapisaniem nowej
  lekcje.splice(index, 1);
  localStorage.setItem(klucz, JSON.stringify(lekcje));
  pokazHistorieLekcji(klasa);
  pokazPostep(klasa);
}


  function pokazHistorieLekcji(klasa) {
    const ul = document.getElementById("historia-lekcji");
    ul.innerHTML = "";
    const klucz = `lekcje_${klasa}`;
    const lekcje = JSON.parse(localStorage.getItem(klucz)) || [];

    lekcje.forEach((lekcja, index) => {
  const li = document.createElement("li");
  li.innerHTML = `<strong>${lekcja.data}:</strong> ${lekcja.temat}<br>${lekcja.opis || ""}`;

  if (lekcja.frekwencja && lekcja.frekwencja.length) {
    li.innerHTML += `<br><strong>Frekwencja:</strong><ul>${
      lekcja.frekwencja.map(f => `<li>${f.uczen}: ${f.status}</li>`).join("")
    }</ul>`;
  }

  // Dodaj przyciski Edytuj i Usuń
  const edytujBtn = document.createElement("button");
  edytujBtn.textContent = "Edytuj";
  edytujBtn.onclick = () => edytujLekcje(index, klasa);

  const usunBtn = document.createElement("button");
  usunBtn.textContent = "Usuń";
  usunBtn.onclick = () => usunLekcje(index, klasa);

  li.appendChild(edytujBtn);
  li.appendChild(usunBtn);
  ul.appendChild(li);
});

  }

  klasaSelect.addEventListener("change", () => {
    updateTematy();
    pokazFrekwencje(klasaSelect.value);
    pokazHistorieLekcji(klasaSelect.value);
	pokazPostep(klasaSelect.value);
  });

  document.addEventListener("DOMContentLoaded", () => {
  updateTematy();
  pokazFrekwencje(klasaSelect.value);
  pokazHistorieLekcji(klasaSelect.value);
  pokazPostep(klasaSelect.value); // ← TO DODAJ
});
pokazTabeleWyboruKlasy();

  function zaznaczWszystkichObecnosc() {
  const kontener = document.getElementById("frekwencja-box");
  const radios = kontener.querySelectorAll('input[type="radio"]');

  radios.forEach(radio => {
    if (radio.value === "Obecność") {
      radio.checked = true;
    }
  });
}
klasaSelect.addEventListener("change", () => {
  const selected = klasaSelect.value;
  const form = document.getElementById("lekcja-form");

  if (selected) {
    form.style.display = "block";
    updateTematy();
    pokazFrekwencje(selected);
    pokazHistorieLekcji(selected);
    pokazPostep(selected);
  } else {
    form.style.display = "none";
  }
});
function pokazTabeleWyboruKlasy() {
  const tabela = document.querySelector("#tabela-klas tbody");
  tabela.innerHTML = "";

  Object.keys(tematy).forEach(klasa => {
    const klucz = `lekcje_${klasa}`;
    const lekcje = JSON.parse(localStorage.getItem(klucz)) || [];
    const ostatnia = lekcje.length ? lekcje[lekcje.length - 1] : null;

    const tr = document.createElement("tr");

    tr.innerHTML = `
      <td>${klasa}</td>
      <td>${ostatnia ? ostatnia.temat : '<em>–</em>'}</td>
      <td>${ostatnia ? ostatnia.data : '<em>–</em>'}</td>
      <td><button onclick="wybierzKlase('${klasa}')">Wybierz i sprawdź obecność</button></td>
    `;

    tabela.appendChild(tr);
  });
}

function wybierzKlase(klasa) {
  document.getElementById("klasa-select").value = klasa;
  document.getElementById("lekcja-form").style.display = "block";
  document.getElementById("wybor-klasy").style.display = "none";
  document.getElementById("historia-box").style.display = "block";

  // ✨ Dodaj ten wiersz:
  document.getElementById("wybrana-klasa").textContent = "Wybrana klasa: " + klasa;

  updateTematy();
  pokazFrekwencje(klasa);
  pokazHistorieLekcji(klasa);
  pokazPostep(klasa);
}



</script>
<!-- Firebase App (core SDK) -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js"></script>
<!-- Firebase Firestore -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js"></script>
<script>
  // Tu wklejasz swój JavaScript

  // Przykład: selektory elementów
  const klasaSelect = document.getElementById("klasa-select");  // Twój select z klasami
  const tematSelect = document.getElementById("temat-select");  // Select z tematami

  // Obiekt z tematami — przykładowa struktura
  const tematy = {
    "1a": ["Matematyka", "Polski"],
    "2b": ["Biologia", "Historia"]
  };

  function aktualizujTematy() {
    const klasa = klasaSelect.value;
    const listaTematow = tematy[klasa] || [];

    tematSelect.innerHTML = ""; // wyczyść

    listaTematow.forEach((temat) => {
      const option = document.createElement("option");
      option.value = temat;
      option.textContent = temat;
      tematSelect.appendChild(option);
    });
  }

  function dodajWlasnyTemat() {
    const nowyTematInput = document.getElementById("nowy-temat");
    const nowyTemat = nowyTematInput.value.trim();

    if (nowyTemat === "") {
      alert("Proszę wpisać temat.");
      return;
    }

    const klasa = klasaSelect.value;

    if (!tematy[klasa]) {
      tematy[klasa] = [];
    }
    tematy[klasa].push(nowyTemat);

    aktualizujTematy();

    nowyTematInput.value = "";
    tematSelect.value = nowyTemat;
  }

  // Aktualizuj tematy po zmianie klasy
  klasaSelect.addEventListener("change", aktualizujTematy);

  // Inicjalizacja tematu przy starcie
  aktualizujTematy();

</script>
<footer style="text-align: center; padding: 20px; background-color: #f0f0f0;">
  <div style="margin-bottom: 10px;">
    <img src="teamppp.png" alt="Team P" style="width: 200px; margin: 0 20px;">
    <img src="21 maj 2025, 16_13_32.png" alt="p-librus" style="width: 200px; margin: 0 20px;">
    <img src="stpschool.png" alt="STP School" style="width: 200px; margin: 0 20px;">
  </div>
  <p style="font-size: 14px; color: #555;">P-Librus © 2025</p>
</footer>


</body>
</html>









